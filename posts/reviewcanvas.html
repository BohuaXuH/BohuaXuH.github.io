<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="author" content="xu"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="revisit-after" content="7 days"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="alternate" type="application/rss+xml" title="XUBOHUA's Blog" href="/feed.xml"><meta name="msapplication-TileColor" content="#ffffff"><meta name="theme-color" content="#ffffff"><title>review canvas</title><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" crossorigin="" src="/assets/app.84dffd4a.js"></script><style>*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}h1,h2,h3,h4{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}h1,h2,h3,h4,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}:root{--c-bg:#fff;--c-scrollbar:#eee;--c-scrollbar-hover:#bbb}html{background-color:var(--c-bg)}html{overflow:scroll}*{scrollbar-color:var(--c-scrollbar) var(--c-bg)}.prose{color:var(--fg);max-width:65ch;font-size:1rem;line-height:1.75}.prose a{color:var(--fg-deeper);text-decoration:none;font-weight:500}.prose strong{color:var(--fg-deep);font-weight:600}.prose ul>li{position:relative;padding-left:1.75em}.prose ul>li:before{content:"";position:absolute;background-color:#d1d5db;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.prose h1{color:var(--fg-deeper);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose h2{color:var(--fg-deep);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose h3{color:inherit;font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6;opacity:.7}.prose h4{color:inherit;font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose code{color:var(--fg-deep);font-weight:600;font-size:.875em}.prose code:before{content:"`"}.prose code:after{content:"`"}.prose a code{color:#111827}.prose pre{color:#e5e7eb;overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose pre code{background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:400;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose pre code:before{content:none}.prose pre code:after{content:none}.prose p{margin-top:1.25em;margin-bottom:1.25em}.prose img{margin-top:2em;margin-bottom:2em}.prose ul{margin-top:1.25em;margin-bottom:1.25em;list-style-type:none}.prose li{margin-top:.5em;margin-bottom:.5em}.prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.prose ul ul{margin-top:.75em;margin-bottom:.75em}.prose h2+*{margin-top:0}.prose h3+*{margin-top:0}.prose h4+*{margin-top:0}.prose>:first-child{margin-top:0}.prose>:last-child{margin-bottom:0}.prose pre:not(.shiki){padding:0;margin:0;background:0 0}.prose .shiki{font-family:DM Mono,Input Mono,Fira Code,monospace;font-size:1.05em;line-height:1.4;margin:.5em 0}.prose img{width:100%}.shiki-light{background:#f8f8f8!important}.shiki-dark{background:#0e0e0e!important}html:not(.dark) .shiki-dark{display:none}.prose{--fg:#555;--fg-deep:#222;--fg-deeper:#000;color:var(--fg)}.prose a{font-weight:inherit;text-decoration:none;border-bottom:1px solid rgba(125,125,125,.3);transition:border .3s ease-in-out}.prose a:hover{border-bottom:1px solid var(--fg)}.prose a code{color:inherit}a.header-anchor{float:left;margin-top:.125em;margin-left:-1.2em;padding-right:.5em;font-size:.85em;opacity:0;text-decoration:none;border:0!important}a.header-anchor:focus,a.header-anchor:hover{text-decoration:none}h2:focus .header-anchor,h2:hover .header-anchor,h3:focus .header-anchor,h3:hover .header-anchor,h4:focus .header-anchor,h4:hover .header-anchor{opacity:.5}@media (max-width:1200px){.table-of-contents{display:none}}.table-of-contents{position:fixed;top:80px;padding-top:70px;font-size:.8em;right:10px;width:200px;bottom:0;overflow-y:auto;overflow-x:hidden;text-overflow:ellipsis;opacity:0;transition:all .4s ease-out}.table-of-contents:hover{opacity:.5}.table-of-contents ul>li:before{display:none}.table-of-contents ul>li{padding-left:.8rem}*,::after,::before{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-scroll-snap-strictness:proximity;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow:0 0 rgba(0,0,0,0);--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5)}[i-bi-badge-3d=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 16 16' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cg fill='currentColor'%3E%3Cpath d='M4.52 8.368h.664c.646 0 1.055.378 1.06.9c.008.537-.427.919-1.086.919c-.598-.004-1.037-.325-1.068-.756H3c.03.914.791 1.688 2.153 1.688c1.24 0 2.285-.66 2.272-1.798c-.013-.953-.747-1.38-1.292-1.432v-.062c.44-.07 1.125-.527 1.108-1.375c-.013-.906-.8-1.57-2.053-1.565c-1.31.005-2.043.734-2.074 1.67h1.103c.022-.391.383-.751.936-.751c.532 0 .928.33.928.813c.004.479-.383.835-.928.835h-.632v.914zm3.606-3.367V11h2.189C12.125 11 13 9.893 13 7.985c0-1.894-.861-2.984-2.685-2.984H8.126zm1.187.967h.844c1.112 0 1.621.686 1.621 2.04c0 1.353-.505 2.02-1.621 2.02h-.844v-4.06z'/%3E%3Cpath d='M14 3a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h12zM2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2z'/%3E%3C/g%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-material-symbols-edit-document-outline-rounded=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M6 22q-.825 0-1.412-.587Q4 20.825 4 20V4q0-.825.588-1.413Q5.175 2 6 2h7.175q.4 0 .763.15q.362.15.637.425l4.85 4.85q.275.275.425.637q.15.363.15.763V12h-2V9h-4q-.425 0-.712-.288Q13 8.425 13 8V4H6v16h6v2Zm0-2V4v16Zm12.3-5.475l1.075 1.075l-3.875 3.85v1.05h1.05l3.875-3.85l1.05 1.05l-4 4q-.15.15-.338.225q-.187.075-.387.075H14.5q-.2 0-.35-.15q-.15-.15-.15-.35v-2.25q0-.2.075-.387q.075-.188.225-.338Zm3.175 3.175L18.3 14.525l1.45-1.45q.275-.275.7-.275q.425 0 .7.275l1.775 1.775q.275.275.275.7q0 .425-.275.7Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-article-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M20 22H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1zm-1-2V4H5v16h14zM7 6h4v4H7V6zm0 6h10v2H7v-2zm0 4h10v2H7v-2zm6-9h4v2h-4V7z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-lightbulb-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M9.973 18H11v-5h2v5h1.027c.132-1.202.745-2.194 1.74-3.277c.113-.122.832-.867.917-.973a6 6 0 1 0-9.37-.002c.086.107.807.853.918.974c.996 1.084 1.609 2.076 1.741 3.278zM10 20v1h4v-1h-4zm-4.246-5a8 8 0 1 1 12.49.002C17.624 15.774 16 17 16 18.5V21a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.5C8 17 6.375 15.774 5.754 15z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-uil-github-alt=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M10.07 20.503a1 1 0 0 0-1.18-.983c-1.31.24-2.963.276-3.402-.958a5.708 5.708 0 0 0-1.837-2.415a1.2 1.2 0 0 1-.167-.11a1 1 0 0 0-.93-.645h-.005a1 1 0 0 0-1 .995c-.004.815.81 1.338 1.141 1.514a4.44 4.44 0 0 1 .924 1.36c.365 1.023 1.423 2.576 4.466 2.376l.003.098l.004.268a1 1 0 0 0 2 0l-.005-.318c-.005-.19-.012-.464-.012-1.182ZM20.737 5.377a5.39 5.39 0 0 0 .09-.42a6.278 6.278 0 0 0-.408-3.293a1.002 1.002 0 0 0-.615-.58c-.356-.12-1.67-.357-4.184 1.25a13.87 13.87 0 0 0-6.354 0C6.762.75 5.455.966 5.102 1.079a.997.997 0 0 0-.631.584a6.3 6.3 0 0 0-.404 3.357c.025.127.051.246.079.354a6.27 6.27 0 0 0-1.256 3.83a8.422 8.422 0 0 0 .043.921c.334 4.603 3.334 5.984 5.424 6.459a4.591 4.591 0 0 0-.118.4a1 1 0 0 0 1.942.479a1.678 1.678 0 0 1 .468-.878a1 1 0 0 0-.546-1.745c-3.454-.395-4.954-1.802-5.18-4.899a6.61 6.61 0 0 1-.033-.738a4.258 4.258 0 0 1 .92-2.713a3.022 3.022 0 0 1 .195-.231a1 1 0 0 0 .188-1.025a3.388 3.388 0 0 1-.155-.555a4.094 4.094 0 0 1 .079-1.616a7.543 7.543 0 0 1 2.415 1.18a1.009 1.009 0 0 0 .827.133a11.777 11.777 0 0 1 6.173.001a1.005 1.005 0 0 0 .83-.138a7.572 7.572 0 0 1 2.406-1.19a4.04 4.04 0 0 1 .087 1.578a3.205 3.205 0 0 1-.169.607a1 1 0 0 0 .188 1.025c.078.087.155.18.224.268A4.122 4.122 0 0 1 20 9.203a7.039 7.039 0 0 1-.038.777c-.22 3.056-1.725 4.464-5.195 4.86a1 1 0 0 0-.546 1.746a1.63 1.63 0 0 1 .466.908a3.06 3.06 0 0 1 .093.82v2.333c-.01.648-.01 1.133-.01 1.356a1 1 0 1 0 2 0c0-.217 0-.692.01-1.34v-2.35a4.881 4.881 0 0 0-.155-1.311a4.256 4.256 0 0 0-.116-.416a6.513 6.513 0 0 0 5.445-6.424A8.697 8.697 0 0 0 22 9.203a6.13 6.13 0 0 0-1.263-3.826Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}.absolute{position:absolute}.z-40{z-index:40}.m-5{margin:1.25rem}.m-auto{margin:auto}.\!-mt-2{margin-top:-.5rem!important}.mb-0{margin-bottom:0}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-10{margin-top:2.5rem}.mt-8{margin-top:2rem}.inline{display:inline}.h-12{height:3rem}.w-12{width:3rem}.flex{display:flex}.flex-auto{flex:1 1 auto}.select-none{user-select:none}[fill~=none]{fill:none}[stroke-width~="\32 "]{stroke-width:2px}[stroke-width~="\34 "]{stroke-width:4px}[stroke~=black]{--un-stroke-opacity:1;stroke:rgba(0,0,0,var(--un-stroke-opacity))}.px-7{padding-left:1.75rem;padding-right:1.75rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.font-mono{font-family:"DM Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}.font-sans{font-family:Inter,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.text-sm{font-size:.875rem;line-height:1.25rem}.text-gray-700{--un-text-opacity:1;color:rgba(55,65,81,var(--un-text-opacity))}.no-underline{text-decoration:none}.opacity-50{opacity:.5}.hover\:opacity-75:hover{opacity:.75}.outline-none{outline:2px solid transparent;outline-offset:2px}@media (max-width:767.9px){.lt-md\:hidden{display:none}}@media (min-width:768px){.md\:hidden,[md\:hidden=""]{display:none}}@media (min-width:1024px){.lg\:fixed{position:fixed}}@media (prefers-reduced-motion){path[data-v-10f99b2b]{animation:none!important;stroke-dasharray:unset!important}}@keyframes grow-10f99b2b{0%{opacity:0}10%{opacity:1;transform:translateY(1%)}40%{transform:translate(0)}50%,to{stroke-dasharray:2000px 0}95%{opacity:1}to{opacity:0}}path[data-v-10f99b2b]{stroke-dashoffset:1px;stroke-dasharray:0 2000px;animation:grow-10f99b2b 12s ease forwards infinite;transform-origin:center;stroke:#303030;animation-delay:0s}.nav[data-v-2aa5d29f]{padding:2rem;width:100%;display:grid;grid-template-columns:auto max-content;box-sizing:border-box}.nav>[data-v-2aa5d29f]{margin:auto}.nav a[data-v-2aa5d29f]{cursor:pointer;text-decoration:none;color:inherit;transition:opacity .2s ease;opacity:.6;outline:0}.nav a[data-v-2aa5d29f]:hover{opacity:1;text-decoration-color:inherit}.nav .right[data-v-2aa5d29f]{display:grid;grid-gap:1.2rem;grid-auto-flow:column}.nav .right>[data-v-2aa5d29f]{margin:auto}</style><link rel="preload" href="/assets/index.372f6e0e.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/reviewcanvas.cf2c0370.js"><meta property="og:image" content="https://s1.imgbed.xyz/2022/09/23/kSyVq.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@XU"><meta property="og:title" content="review canvas"><meta property="og:description" content="review canvas"><meta name="description" content="review canvas"><meta name="head:count" content="6"></head><body class="font-sans text-gray-700 dark:text-gray-200"><div id="app" data-server-rendered="true"><!--[--><header class="header z-40" data-v-2aa5d29f=""><a href="/" class="w-12 h-12 absolute lg:fixed m-5 select-none outline-none" focusable="false" data-v-2aa5d29f=""><svg viewBox="0 0 226 206" width="100" height="100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2aa5d29f="" data-v-10f99b2b=""><title data-v-10f99b2b="">© Bohua Xu</title><path d="M207.618 27.9436C208.818 31.8103 209.351 32.3436 209.351 30.2103C209.484 26.6103 207.351 21.9436 205.484 21.9436C204.818 21.9436 203.884 23.2769 203.351 24.877C202.951 26.477 199.751 30.6103 196.551 34.2103C189.618 41.5436 188.018 48.2103 190.684 58.7436C191.884 63.4103 191.884 66.077 190.684 69.5436C189.218 74.3436 190.951 81.9437 193.751 81.9437C197.218 81.9437 202.951 77.277 207.084 71.0103C215.751 57.9436 218.018 52.477 217.751 44.7436C217.751 38.6103 218.151 37.1436 220.951 35.0103C224.284 32.3436 225.218 28.6103 222.551 28.6103C221.751 28.6103 219.484 29.9436 217.751 31.5436L214.418 34.6103L215.218 28.6103C215.751 24.3436 216.951 22.077 219.351 20.2103C221.218 18.877 222.818 17.1436 222.818 16.477C222.818 14.2103 218.818 15.277 217.218 17.9436C215.218 21.1436 212.018 21.277 206.818 18.6103C200.951 15.5436 197.484 10.3436 198.284 5.94363C199.084 2.47697 197.484 -0.1897 195.618 1.54364C195.218 1.94363 194.818 3.8103 194.818 5.54364C194.818 8.6103 194.418 8.74363 190.551 7.67697C184.284 6.21031 156.151 6.34363 156.284 7.94363C156.284 8.74363 157.351 9.14364 158.684 9.01031C160.018 8.87698 162.151 9.81032 163.351 11.1436C165.484 13.4103 165.084 13.8103 157.218 17.4103C151.884 19.677 146.418 21.1436 142.551 21.1436C134.151 21.277 133.751 23.677 141.751 24.6103C149.751 25.5436 152.418 27.8103 148.684 30.6103C142.684 35.1436 136.551 37.277 128.951 37.277C123.884 37.277 120.818 37.8103 120.551 38.877C120.151 40.077 121.484 40.6103 124.684 40.6103C127.351 40.6103 129.484 41.277 129.484 41.9436C129.484 44.6103 120.551 48.7436 103.484 54.077C64.951 65.9436 50.4176 72.7437 39.0843 83.677C36.0176 86.7437 32.151 91.8103 30.6843 94.877C29.0843 98.3437 27.351 100.21 26.2843 99.8103C23.351 98.7437 16.551 106.744 13.4843 114.877C11.8843 119.01 9.75096 126.344 8.68429 131.144C7.61763 135.81 5.75096 141.41 4.68429 143.41C2.55096 147.677 2.28429 152.21 4.15096 152.877C4.95096 153.144 4.68429 155.944 3.35096 159.944C2.15096 163.944 1.21763 172.744 1.08429 182.077C0.817626 195.81 1.08429 197.944 3.35096 200.477C7.35096 204.877 6 188.5 6 188.5V187C6 186 9.56682 170.333 12.3668 165.667C14.5002 162.067 16.6846 158.077 17.0846 158.477C17.4846 158.744 16.9513 162.077 16.1513 165.677C14.4179 172.344 14.9513 176.61 17.4846 176.61C18.2846 176.61 18.8179 173.41 18.8179 169.144C18.8179 162.61 19.7513 159.944 25.4846 149.277C29.2179 142.477 32.1513 135.277 32.1513 133.144C32.1513 128.61 34.2846 127.01 46.1513 122.61C56.5513 118.61 70.9512 117.144 78.5512 119.144C81.6179 120.077 84.1512 121.144 84.1512 121.81C84.1512 123.944 76.5512 129.944 74.6846 129.277C71.8846 128.21 54.4179 137.144 48.8179 142.477C46.2846 145.01 44.1513 148.21 44.1513 149.677C44.1513 151.277 46.3184 155.277 48.2846 160.61C50.2508 165.944 52.818 169.41 47.618 184.077C43.8846 194.344 44.4179 199.944 49.3513 206.077L51.7513 209.144L53.618 205.81C54.9513 203.544 55.4846 197.41 55.4846 184.61V166.61L61.2179 155.944C64.4179 150.077 69.0846 142.344 71.7513 138.61C76.0179 132.877 76.6846 132.344 77.6179 134.61C79.6179 139.81 78.8179 143.144 74.0179 148.877C67.7512 156.21 64.1513 163.944 64.1513 170.21C64.1513 175.544 65.2179 179.277 66.8179 179.277C68.4179 179.277 74.6846 164.21 77.3512 154.077C79.2179 146.344 80.6846 143.81 85.0846 139.677C91.8846 133.277 93.0846 129.677 90.0179 125.01C88.4179 122.477 88.1513 121.277 89.3512 120.877C92.6846 119.81 104.018 109.944 104.818 107.41C105.618 104.61 109.618 103.144 122.818 100.61C137.751 97.8103 148.818 99.6769 159.085 106.744C164.951 110.877 167.218 116.344 165.351 121.81C164.151 125.144 163.218 125.677 157.485 126.344C153.885 126.744 148.551 128.344 145.618 129.944C139.751 132.877 134.951 139.944 137.351 142.344C139.085 144.077 151.085 138.344 158.285 132.077C161.351 129.544 166.551 126.744 169.885 125.944C183.885 122.344 185.885 114.21 176.285 99.8103L173.485 95.6769L183.751 96.3436C196.018 97.0103 201.751 99.1436 204.818 103.81C207.351 107.677 206.285 112.744 201.618 118.877L198.818 122.21L197.618 118.877C196.285 115.41 190.018 110.344 188.685 111.677C188.285 112.077 189.218 113.01 190.685 113.944C192.285 114.744 194.418 116.877 195.618 118.744C197.751 121.81 197.618 122.344 194.685 127.944C192.151 132.61 191.885 134.477 192.951 137.544C193.751 139.944 195.218 141.277 196.818 141.277C199.218 141.277 199.485 140.477 199.218 132.744C198.818 125.544 199.218 123.81 202.018 120.477C206.951 114.61 208.685 108.21 206.551 103.677C204.018 98.3436 197.218 95.6769 183.485 94.6103C174.685 93.8103 176.285 96.6103 173.485 94.6103" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-10f99b2b=""></path></svg></a><nav class="nav" data-v-2aa5d29f=""><div class="spacer" data-v-2aa5d29f=""></div><div class="right" data-v-2aa5d29f=""><a href="/posts" class="" title="Blog" data-v-2aa5d29f=""><span class="lt-md:hidden" data-v-2aa5d29f="">Blog</span><div i-ri-article-line="" md:hidden="" data-v-2aa5d29f=""></div></a><a href="/projects" class="" title="Projects" data-v-2aa5d29f=""><span class="lt-md:hidden" data-v-2aa5d29f="">Projects</span><div i-ri-lightbulb-line="" class="md:hidden" data-v-2aa5d29f=""></div></a><a href="/react" class="lt-md:hidden" title="React" data-v-2aa5d29f="">React </a><a href="/vue" class="lt-md:hidden" title="vue" data-v-2aa5d29f="">Vue </a><a href="/jottings" class="lt-md:hidden" title="jottings" data-v-2aa5d29f="">Jottings </a><a href="/wechat" class="" title="wechat" data-v-2aa5d29f=""><svg width="20" height="20" viewBox="0 0 48 48" data-v-2aa5d29f=""><g fill="none" data-v-2aa5d29f=""><path d="M36.997 21.711C36.843 13.008 29.74 6 21 6C12.163 6 5 13.163 5 22c0 4.17 1.595 7.968 4.209 10.815l-1.199 7.21l7.115-3.055c3.135 1.042 6.093 1.303 8.875.782" clip-rule="evenodd" data-v-2aa5d29f=""></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M36.997 21.711C36.843 13.008 29.74 6 21 6C12.163 6 5 13.163 5 22c0 4.17 1.595 7.968 4.209 10.815l-1.199 7.21l7.115-3.055c3.135 1.042 6.093 1.303 8.875.782" data-v-2aa5d29f=""></path><path fill="currentColor" d="M15.125 20.467a2.258 2.258 0 0 0 2.25-2.267a2.258 2.258 0 0 0-2.25-2.267a2.258 2.258 0 0 0-2.25 2.267a2.258 2.258 0 0 0 2.25 2.267Zm9 0a2.258 2.258 0 0 0 2.25-2.267a2.258 2.258 0 0 0-2.25-2.267a2.258 2.258 0 0 0-2.25 2.267a2.258 2.258 0 0 0 2.25 2.267Z" data-v-2aa5d29f=""></path><path d="M38.762 39.93A10.453 10.453 0 0 1 32.5 42C26.701 42 22 37.299 22 31.5S26.701 21 32.5 21S43 25.701 43 31.5c0 1.6-.358 3.116-.998 4.473" clip-rule="evenodd" data-v-2aa5d29f=""></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M38.762 39.93A10.453 10.453 0 0 1 32.5 42C26.701 42 22 37.299 22 31.5S26.701 21 32.5 21S43 25.701 43 31.5c0 1.6-.358 3.116-.998 4.473" data-v-2aa5d29f=""></path><path d="M42.002 35.973L43 42l-4.238-2.07" clip-rule="evenodd" data-v-2aa5d29f=""></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M42.002 35.973L43 42l-4.238-2.07" data-v-2aa5d29f=""></path><path fill="currentColor" d="M35.688 30.8A1.694 1.694 0 0 1 34 29.1c0-.939.755-1.7 1.688-1.7c.931 0 1.687.761 1.687 1.7s-.755 1.7-1.688 1.7Zm-6.75 0a1.694 1.694 0 0 1-1.688-1.7c0-.939.756-1.7 1.688-1.7c.931 0 1.687.761 1.687 1.7s-.756 1.7-1.688 1.7Z" data-v-2aa5d29f=""></path></g></svg></a><a href="https://xubohua.top/" target="_blank" title="notes" class="lt-md:hidden" data-v-2aa5d29f=""><div i-material-symbols-edit-document-outline-rounded="" data-v-2aa5d29f=""></div></a><a href="https://github.com/xubohuah" target="_blank" title="GitHub" class="lt-md:hidden" data-v-2aa5d29f=""><div i-uil-github-alt="" data-v-2aa5d29f=""></div></a><a href="https://3d.xubh.top" target="_blank" title="GitHub" class="lt-md:hidden" data-v-2aa5d29f=""><div i-bi-badge-3d="" data-v-2aa5d29f=""></div></a><a href="https://3d.xubh.top" target="_blank" title="GitHub" class="md:hidden" data-v-2aa5d29f=""><div i-bi-badge-3d="" data-v-2aa5d29f=""></div></a><a class="select-none" title="Toggle Color Scheme" data-v-2aa5d29f=""><svg style="vertical-align:sub;display:none" class="inline" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A7.999 7.999 0 0 0 4 12z"></path></svg><svg style="vertical-align:sub" class="inline" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></a></div></nav></header><main class="px-7 py-10"><!--[--><!----><div class="prose m-auto mb-8"><h1 class="mb-0">review canvas</h1><p class="opacity-50 !-mt-2">Nov 19, 2022 <span>· 30min</span></p><!----></div><article><!--[--><div class="prose m-auto"><p></p><div class="table-of-contents"><ul><li><a href="#jotting">jotting</a></li><li><a href="#go-over-canvas">go over canvas</a><ul><li><a href="#线">线</a></li><li><a href="#矩形">矩形</a></li><li><a href="#圆和圆弧">圆和圆弧</a></li><li><a href="#二次贝塞尔曲线及三次贝塞尔曲线">二次贝塞尔曲线及三次贝塞尔曲线</a></li><li><a href="#椭圆">椭圆</a></li><li><a href="#矩形-1">矩形</a></li></ul></li><li><a href="#绘制样式">绘制样式</a><ul><li><a href="#线条的样式">线条的样式</a></li><li><a href="#透明度">透明度</a></li></ul></li><li><a href="#绘制文本">绘制文本</a></li><li><a href="#动画">动画</a><ul><li><a href="#速率">速率</a></li><li><a href="#边界">边界</a></li><li><a href="#加速度">加速度</a></li><li><a href="#拖尾效果">拖尾效果</a></li></ul></li><li><a href="#在taro中使用canvas">在taro中使用canvas</a></li></ul></div><p></p><h2 id="jotting" tabindex="-1">jotting <a class="header-anchor" href="#jotting" aria-hidden="true">#</a></h2><p>正是<code>H5</code>的这么一项技术再加上adobe的<code>svg</code>使得童年的flash逐渐退出了历史的舞台，就像我们不能一直玩洛克王国，玩4399的各种小游戏一样，我们也不可能一直使用旧的技术，web前端再以一种很快的速度更新迭代，技术一直在发展，日新月异。从<code>vue2</code>到<code>vue3</code>，从<code>react</code>的<code>类式组件</code>到<code>函数式组件</code>，从初识<code>css in js</code>的激动不已到<code>css in js</code>的<code>emotion</code>库的主要贡献者提出因为性能的缺陷弃用<code>css in js</code>而采用<code>Sass Modules</code>等等等 ,我初识前端就感受到了它的发展之快，不断的迭代。</p><p>从21年初次学习使用<code>canvas</code>到现在也过去了一年多的时间了，我很喜欢<code>canvas</code>但是我在实际的各个项目中使用的少之又少，在写数据可视化相关的项目时，我也没有去自己使用<code>canvas</code>去写各种效果，因为会占用很多时间，并没有大把的数据可视化的库来的方便，导致很多<code>canvas</code>的特性也早就忘的差不多了，<code>webgl</code>我很感兴趣，<code>three.js</code>我认为拿这些<code>3D</code>的东西写出的页面很炫酷，需要很牢靠的数学支撑，我也在各种的说国内<code>webgl</code>岗位并不多、少等等等中，并未深入学习。这是一篇我复习canvas的一些特性的简单文章。</p><p><img src="https://s1.imgbed.xyz/2022/11/20/GZXGT.jpg" alt="微信图片"></p><p>21年使用<code>canvas</code>画的国旗</p><p><img src="https://s1.imgbed.xyz/2022/11/20/GZeMF.jpg" alt="微信图片_20221120014939"></p><h2 id="go-over-canvas" tabindex="-1">go over canvas <a class="header-anchor" href="#go-over-canvas" aria-hidden="true">#</a></h2><p><code>canvas</code>标签创建了一个固定大小的画布，公开了一个或多个渲染的上下文，我们想要绘制就要先找到上下文</p><p><code>canvas</code>提供了一个方法—<code>getContext()</code>通过此方法我们就可以获取渲染上下文和绘画功能</p><p>上下文类型（contextType）</p><p>是一个指示使用何种上下文的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener"><code>DOMString</code></a> 。可能的值是：</p><ul><li><code>"2d</code>", 建立一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D" target="_blank" rel="noopener"><code>CanvasRenderingContext2D</code></a> 二维渲染上下文。</li><li><code>"webgl"</code> (或<code>"experimental-webgl"</code>) 这将创建一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebGLRenderingContext" target="_blank" rel="noopener"><code>WebGLRenderingContext</code></a> 三维渲染上下文对象。只在实现<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API" target="_blank" rel="noopener">WebGL</a> 版本 1(OpenGL ES 2.0) 的浏览器上可用。</li><li>"<code>webgl2</code>" (或 "<code>experimental-webgl2</code>") 这将创建一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL2RenderingContext" target="_blank" rel="noopener"><code>WebGL2RenderingContext</code></a> 三维渲染上下文对象。只在实现 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API" target="_blank" rel="noopener">WebGL</a> 版本 2 (OpenGL ES 3.0) 的浏览器上可用。实验性</li><li><code>"bitmaprenderer"</code> 这将创建一个只提供将 canvas 内容替换为指定<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ImageBitmap" target="_blank" rel="noopener"><code>ImageBitmap</code></a>功能的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ImageBitmapRenderingContext" target="_blank" rel="noopener"><code>ImageBitmapRenderingContext</code></a> 。</li></ul><h3 id="线" tabindex="-1">线 <a class="header-anchor" href="#线" aria-hidden="true">#</a></h3><h4 id="moveto-x-y" tabindex="-1">moveTo(x, y) <a class="header-anchor" href="#moveto-x-y" aria-hidden="true">#</a></h4><p>设置初始位置，参数为初始位置x和y的坐标点</p><h4 id="lineto-x-y" tabindex="-1">lineTo(x, y) <a class="header-anchor" href="#lineto-x-y" aria-hidden="true">#</a></h4><p>绘制一条从初始位置到指定位置的直线，参数为指定位置x和y的坐标点</p><h4 id="stroke" tabindex="-1">stroke() <a class="header-anchor" href="#stroke" aria-hidden="true">#</a></h4><p>通过线条来绘制图形轮廓</p><pre><code class="language-js"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#758575">//简单画三角形</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">        canvas </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">box</span><span style="color:#cb7676">-</span><span style="color:#b8a965">shadow</span><span style="color:#dbd7ca">: 0</span><span style="color:#b8a965">px</span><span style="color:#dbd7ca"> 0</span><span style="color:#b8a965">px</span><span style="color:#dbd7ca"> 5</span><span style="color:#b8a965">px</span><span style="color:#dbd7ca"> #</span><span style="color:#b8a965">ccc</span><span style="color:#dbd7ca">;</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">border</span><span style="color:#cb7676">-</span><span style="color:#b8a965">radius</span><span style="color:#dbd7ca">: 8</span><span style="color:#b8a965">px</span><span style="color:#dbd7ca">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;/</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#cb7676">&lt;/</span><span style="color:#b8a965">head</span><span style="color:#cb7676">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;</span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">id</span><span style="color:#cb7676">=</span><span style="color:#c98a7d">"canvas"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">width</span><span style="color:#cb7676">=</span><span style="color:#c98a7d">"500"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">height</span><span style="color:#cb7676">=</span><span style="color:#c98a7d">"500"</span><span style="color:#858585">&gt;&lt;/</span><span style="color:#429988">canvas</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">        var canvas = document.getElementById('canvas')</span></span>
<span class="line"><span style="color:#dbd7ca">        if(canvas.getContext) </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ctx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#a1b567">getContext</span><span style="color:#858585">(</span><span style="color:#c98a7d">'2d'</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">beginPath</span><span style="color:#858585">()</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">moveTo</span><span style="color:#858585">(</span><span style="color:#6394bf">50</span><span style="color:#858585">,</span><span style="color:#6394bf">50</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">lineTo</span><span style="color:#858585">(</span><span style="color:#6394bf">200</span><span style="color:#858585">,</span><span style="color:#6394bf">200</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">lineTo</span><span style="color:#858585">(</span><span style="color:#6394bf">200</span><span style="color:#858585">,</span><span style="color:#6394bf">50</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">lineTo</span><span style="color:#858585">(</span><span style="color:#6394bf">50</span><span style="color:#858585">,</span><span style="color:#6394bf">50</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">fill</span><span style="color:#858585">()</span></span>
<span class="line"><span style="color:#dbd7ca">            </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">stroke</span><span style="color:#858585">()</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;/</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#a0ada0">//简单画三角形</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">        canvas </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">box</span><span style="color:#ab5959">-</span><span style="color:#8c862b">shadow</span><span style="color:#393a34">: 0</span><span style="color:#8c862b">px</span><span style="color:#393a34"> 0</span><span style="color:#8c862b">px</span><span style="color:#393a34"> 5</span><span style="color:#8c862b">px</span><span style="color:#393a34"> #</span><span style="color:#8c862b">ccc</span><span style="color:#393a34">;</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">border</span><span style="color:#ab5959">-</span><span style="color:#8c862b">radius</span><span style="color:#393a34">: 8</span><span style="color:#8c862b">px</span><span style="color:#393a34">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#ab5959">&lt;/</span><span style="color:#8c862b">head</span><span style="color:#ab5959">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#b58451">id</span><span style="color:#ab5959">=</span><span style="color:#b56959">"canvas"</span><span style="color:#393a34"> </span><span style="color:#b58451">width</span><span style="color:#ab5959">=</span><span style="color:#b56959">"500"</span><span style="color:#393a34"> </span><span style="color:#b58451">height</span><span style="color:#ab5959">=</span><span style="color:#b56959">"500"</span><span style="color:#8e8f8b">&gt;&lt;/</span><span style="color:#2f8a89">canvas</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">        var canvas = document.getElementById('canvas')</span></span>
<span class="line"><span style="color:#393a34">        if(canvas.getContext) </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ctx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getContext</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'2d'</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">beginPath</span><span style="color:#8e8f8b">()</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">moveTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">50</span><span style="color:#8e8f8b">,</span><span style="color:#296aa3">50</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">lineTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">200</span><span style="color:#8e8f8b">,</span><span style="color:#296aa3">200</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">lineTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">200</span><span style="color:#8e8f8b">,</span><span style="color:#296aa3">50</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">lineTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">50</span><span style="color:#8e8f8b">,</span><span style="color:#296aa3">50</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">fill</span><span style="color:#8e8f8b">()</span></span>
<span class="line"><span style="color:#393a34">            </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">stroke</span><span style="color:#8e8f8b">()</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="矩形" tabindex="-1">矩形 <a class="header-anchor" href="#矩形" aria-hidden="true">#</a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/fillRect" target="_blank" rel="noopener"><code>fillRect(x, y, width, height)</code></a></p><p>x和y 是矩形的起点坐标，width和height 是矩形的宽高。</p><p>绘制一个填充的矩形</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/strokeRect" target="_blank" rel="noopener"><code>strokeRect(x, y, width, height)</code></a></p><p>绘制一个矩形的边框</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/clearRect" target="_blank" rel="noopener"><code>clearRect(x, y, width, height)</code></a></p><p>清除指定矩形区域，让清除部分完全透明。</p><h3 id="圆和圆弧" tabindex="-1">圆和圆弧 <a class="header-anchor" href="#圆和圆弧" aria-hidden="true">#</a></h3><p>绘制圆弧或者圆，我们使用<code>arc()</code>方法。当然可以使用<code>arcTo()</code>，不过这个的实现并不是那么的可靠，所以我们这里不作介绍。</p><ul><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/arc" target="_blank" rel="noopener"><code>arc(x, y, radius, startAngle, endAngle, anticlockwise)</code></a></p><p>画一个以（x,y）为圆心的以 radius 为半径的圆弧（圆），从 startAngle 开始到 endAngle 结束，按照 anticlockwise 给定的方向（默认为顺时针）来生成。</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/arcTo" target="_blank" rel="noopener"><code>arcTo(x1, y1, x2, y2, radius)</code></a></p><p>根据给定的控制点和半径画一段圆弧，再以直线连接两个控制点。</p></li></ul><p>这里详细介绍一下 arc 方法，该方法有六个参数：<code>x,y</code>为绘制圆弧所在圆上的圆心坐标。<code>radius</code>为半径。<code>startAngle</code>以及<code>endAngle</code>参数用弧度定义了开始以及结束的弧度。这些都是以 x 轴为基准。参数<code>anticlockwise</code>为一个布尔值。为 true 时，是逆时针方向，否则顺时针方向。</p><p>👻<strong>备注：</strong> <code>arc()</code> 函数中表示角的单位是弧度，不是角度。角度与弧度的 js 表达式：</p><p><strong>弧度=(Math.PI/180)*角度。</strong></p><h3 id="二次贝塞尔曲线及三次贝塞尔曲线" tabindex="-1">二次贝塞尔曲线及三次贝塞尔曲线 <a class="header-anchor" href="#二次贝塞尔曲线及三次贝塞尔曲线" aria-hidden="true">#</a></h3><p>二次及三次贝塞尔曲线都十分有用，一般用来绘制复杂有规律的图形（贝塞尔曲线）。</p><pre><code class="language-js"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#a1b567">quadraticCurveTo</span><span style="color:#858585">(</span><span style="color:#b8a965">cp1x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">cp1y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">y</span><span style="color:#858585">)</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#6c7834">quadraticCurveTo</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">cp1x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">cp1y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">)</span></span>
<span class="line"></span></code></pre></div></code></pre><p>绘制二次贝塞尔曲线，<code>cp1x,cp1y</code> 为一个控制点，<code>x,y</code> 为结束点。</p><pre><code class="language-js"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#a1b567">bezierCurveTo</span><span style="color:#858585">(</span><span style="color:#b8a965">cp1x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">cp1y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">cp2x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">cp2y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">y</span><span style="color:#858585">)</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#6c7834">bezierCurveTo</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">cp1x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">cp1y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">cp2x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">cp2y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">)</span></span>
<span class="line"></span></code></pre></div></code></pre><p>绘制三次贝塞尔曲线，<code>cp1x,cp1y</code>为控制点一，<code>cp2x,cp2y</code>为控制点二，<code>x,y</code>为结束点。 <img src="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes/canvas_curves.png" width="50%"></p><p>右边的图能够很好的描述两者的关系，二次贝塞尔曲线有一个开始点（蓝色）、一个结束点（蓝色）以及一个控制点（红色），而三次贝塞尔曲线有两个控制点。</p><p>参数 x、y 在这两个方法中都是结束点坐标。<code>cp1x,cp1y</code>为坐标中的第一个控制点，<code>cp2x,cp2y</code>为坐标中的第二个控制点。</p><p>使用二次以及三次贝塞尔曲线是有一定的难度的，因为不同于像 Adobe Illustrators 这样的矢量软件，我们所绘制的曲线没有给我们提供直接的视觉反馈。这让绘制复杂的图形变得十分困难。在下面的例子中，我们会绘制一些简单有规律的图形，如果你有时间以及更多的耐心，很多复杂的图形你也可以绘制出来。</p><p>这里也可以借助一个网页版的<a href="https://link.juejin.cn/?target=http%3A%2F%2Fblogs.sitepointstatic.com%2Fexamples%2Ftech%2Fcanvas-curves%2Fbezier-curve.html" target="_blank" rel="noopener">三次贝塞尔曲线调试工具</a>来看效果</p><h3 id="椭圆" tabindex="-1">椭圆 <a class="header-anchor" href="#椭圆" aria-hidden="true">#</a></h3><p>添加椭圆路径。</p><p>语法：ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)</p><ul><li>x、y：椭圆的圆心位置</li><li>radiusX、radiusY：x轴和y轴的半径</li><li>rotation：椭圆的旋转角度，以弧度表示</li><li>startAngle：开始绘制点</li><li>endAngle：结束绘制点</li><li>anticlockwise：绘制的方向（默认顺时针），可选参数。</li></ul><h3 id="矩形-1" tabindex="-1">矩形 <a class="header-anchor" href="#矩形-1" aria-hidden="true">#</a></h3><p>直接在画布上绘制矩形的三个额外方法，正如我们开始所见的-绘制矩形，同样，也有 rect() 方法，将一个矩形路径增加到当前路径上。</p><ul><li><p><code>rect(x, y, width, height)</code></p><p>绘制一个左上角坐标为（x,y），宽高为 width 以及 height 的矩形。</p></li></ul><p>当该方法执行的时候，moveTo() 方法自动设置坐标参数（0,0）。也就是说，当前笔触自动重置回默认坐标。</p><h2 id="绘制样式" tabindex="-1">绘制样式 <a class="header-anchor" href="#绘制样式" aria-hidden="true">#</a></h2><h3 id="线条的样式" tabindex="-1">线条的样式 <a class="header-anchor" href="#线条的样式" aria-hidden="true">#</a></h3><p>线条的样式可以通过下面一系列属性来设置。</p><h4 id="linewidth" tabindex="-1">lineWidth <a class="header-anchor" href="#linewidth" aria-hidden="true">#</a></h4><p>lineWidth 设置当前绘线的粗细。属性值必须为正数。默认值是 1.0。</p><h4 id="linecap" tabindex="-1">lineCap <a class="header-anchor" href="#linecap" aria-hidden="true">#</a></h4><p>lineCap 设置线段端点显示的样子。可选值为：butt，round 和 square。默认是 butt。</p><h4 id="linejoin" tabindex="-1">lineJoin <a class="header-anchor" href="#linejoin" aria-hidden="true">#</a></h4><p>lineJoin 该属性可以设置两线段连接处所显示的样子。可选值为：round, bevel 和 miter。默认是 miter。</p><h4 id="miterlimit" tabindex="-1">miterLimit <a class="header-anchor" href="#miterlimit" aria-hidden="true">#</a></h4><p>miterLimit 限制当两条线相交时交接处最大长度；所谓交接处长度（斜接长度）是指线条交接处内角顶点到外角顶点的长度。</p><p>线段之间夹角比较大时，交点不会太远，但随着夹角变小，交点距离会呈指数级增大。</p><p>如果交点距离大于miterLimit值，连接效果会变成了 lineJoin = bevel 的效果。</p><h4 id="setlinedash-getlinedash" tabindex="-1">setLineDash/getLineDash <a class="header-anchor" href="#setlinedash-getlinedash" aria-hidden="true">#</a></h4><p>setLineDash 可以设置当前虚线样式。</p><p>getLineDash 则是返回当前虚线设置的样式，长度为非负偶数的数组。</p><h4 id="linedashoffset" tabindex="-1">lineDashOffset <a class="header-anchor" href="#linedashoffset" aria-hidden="true">#</a></h4><p>lineDashOffset 设置虚线样式的起始偏移量。</p><h3 id="透明度" tabindex="-1">透明度 <a class="header-anchor" href="#透明度" aria-hidden="true">#</a></h3><p>除了绘制实色的图形，还可以绘制有透明度的图形。通过设置 globalAlpha 属性或者使用有透明度的样式作为轮廓或填充都可以实现</p><p>等等各种样式[可见MDN文档](<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Applying_styles_and_colors#%E9%80%8F%E6%98%8E%E5%BA%A6_transparency" target="_blank" rel="noopener">使用样式和颜色 - Web API 接口参考 | MDN (mozilla.org)</a>)</p><h2 id="绘制文本" tabindex="-1">绘制文本 <a class="header-anchor" href="#绘制文本" aria-hidden="true">#</a></h2><p>canvas 提供了两种方法来渲染文本：</p><ul><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/fillText" target="_blank" rel="noopener"><code>fillText(text, x, y [, maxWidth\])</code></a></p><p>在指定的 (x,y) 位置填充指定的文本，绘制的最大宽度是可选的。</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/strokeText" target="_blank" rel="noopener"><code>strokeText(text, x, y [, maxWidth\])</code></a></p><p>在指定的 (x,y) 位置绘制文本边框，绘制的最大宽度是可选的。</p></li></ul><p>同样文本的样式也可以改变</p><h2 id="动画" tabindex="-1">动画 <a class="header-anchor" href="#动画" aria-hidden="true">#</a></h2><p><strong>绘制小球</strong></p><pre><code class="language-html"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">&lt;!</span><span style="color:#429988">DOCTYPE</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">html</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">lang</span><span style="color:#858585">=</span><span style="color:#c98a7d">"en"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">charset</span><span style="color:#858585">=</span><span style="color:#c98a7d">"UTF-8"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">http-equiv</span><span style="color:#858585">=</span><span style="color:#c98a7d">"X-UA-Compatible"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"IE=edge"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">name</span><span style="color:#858585">=</span><span style="color:#c98a7d">"viewport"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"width=device-width, initial-scale=1.0"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span><span style="color:#dbd7ca">canvas - 动画</span><span style="color:#858585">&lt;/</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#758575">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">box-shadow</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">5</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">ccc</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">border-radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">8</span><span style="color:#cb7676">px</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">id</span><span style="color:#858585">=</span><span style="color:#c98a7d">"canvas"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">width</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">height</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">canvas</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">document</span><span style="color:#858585">.</span><span style="color:#a1b567">getElementById</span><span style="color:#858585">(</span><span style="color:#c98a7d">'canvas'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#858585">(</span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">getContext</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#858585">      </span><span style="color:#758575">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ctx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#a1b567">getContext</span><span style="color:#858585">(</span><span style="color:#c98a7d">'2d'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">x</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">y</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">25</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">color</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'blue'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#a1b567">draw</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">function</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">beginPath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">arc</span><span style="color:#858585">(</span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">radius</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">Math</span><span style="color:#858585">.</span><span style="color:#d4976c">PI</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">*</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">2</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">true</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">closePath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#b8a965">fillStyle</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">color</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">fill</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">};</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">&lt;!</span><span style="color:#2f8a89">DOCTYPE</span><span style="color:#393a34"> </span><span style="color:#b58451">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">html</span><span style="color:#393a34"> </span><span style="color:#b58451">lang</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"en"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">charset</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"UTF-8"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">http-equiv</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"X-UA-Compatible"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"IE=edge"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">name</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"viewport"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"width=device-width, initial-scale=1.0"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span><span style="color:#393a34">canvas - 动画</span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#a0ada0">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">box-shadow</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">5</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">ccc</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">border-radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">8</span><span style="color:#ab5959">px</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#b58451">id</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"canvas"</span><span style="color:#393a34"> </span><span style="color:#b58451">width</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#393a34"> </span><span style="color:#b58451">height</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">canvas</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">document</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getElementById</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'canvas'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">getContext</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#8e8f8b">      </span><span style="color:#a0ada0">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ctx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getContext</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'2d'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">x</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">y</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">25</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">color</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'blue'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#ab5959">function</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">beginPath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">arc</span><span style="color:#8e8f8b">(</span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">radius</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">Math</span><span style="color:#8e8f8b">.</span><span style="color:#a65e2b">PI</span><span style="color:#393a34"> </span><span style="color:#ab5959">*</span><span style="color:#393a34"> </span><span style="color:#296aa3">2</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#1c6b48">true</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">closePath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">fillStyle</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">color</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">fill</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">};</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="速率" tabindex="-1">速率 <a class="header-anchor" href="#速率" aria-hidden="true">#</a></h3><p>我们通过给小球添加速率矢量进行移动。这个依旧用requestAnimationFrame() 方法来实现，在每一帧里面，依旧用clear 清理掉之前帧里旧的圆形。</p><pre><code class="language-html"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">&lt;!</span><span style="color:#429988">DOCTYPE</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">html</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">lang</span><span style="color:#858585">=</span><span style="color:#c98a7d">"en"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">charset</span><span style="color:#858585">=</span><span style="color:#c98a7d">"UTF-8"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">http-equiv</span><span style="color:#858585">=</span><span style="color:#c98a7d">"X-UA-Compatible"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"IE=edge"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">name</span><span style="color:#858585">=</span><span style="color:#c98a7d">"viewport"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"width=device-width, initial-scale=1.0"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span><span style="color:#dbd7ca">canvas - 裁剪</span><span style="color:#858585">&lt;/</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#758575">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">box-shadow</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">5</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">ccc</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">border-radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">8</span><span style="color:#cb7676">px</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">id</span><span style="color:#858585">=</span><span style="color:#c98a7d">"canvas"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">width</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">height</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">canvas</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">document</span><span style="color:#858585">.</span><span style="color:#a1b567">getElementById</span><span style="color:#858585">(</span><span style="color:#c98a7d">'canvas'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#858585">(</span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">getContext</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#858585">      </span><span style="color:#758575">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ctx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#a1b567">getContext</span><span style="color:#858585">(</span><span style="color:#c98a7d">'2d'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">x</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">y</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vx</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">1</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vy</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">3</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">25</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">color</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'blue'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#a1b567">draw</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">function</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">beginPath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">arc</span><span style="color:#858585">(</span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">radius</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">Math</span><span style="color:#858585">.</span><span style="color:#d4976c">PI</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">*</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">2</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">true</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">closePath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#b8a965">fillStyle</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">color</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">fill</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">};</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">function</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">draw</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">clearRect</span><span style="color:#858585">(</span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">width</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">height</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加速率</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">       </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">&lt;!</span><span style="color:#2f8a89">DOCTYPE</span><span style="color:#393a34"> </span><span style="color:#b58451">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">html</span><span style="color:#393a34"> </span><span style="color:#b58451">lang</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"en"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">charset</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"UTF-8"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">http-equiv</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"X-UA-Compatible"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"IE=edge"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">name</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"viewport"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"width=device-width, initial-scale=1.0"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span><span style="color:#393a34">canvas - 裁剪</span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#a0ada0">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">box-shadow</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">5</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">ccc</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">border-radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">8</span><span style="color:#ab5959">px</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#b58451">id</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"canvas"</span><span style="color:#393a34"> </span><span style="color:#b58451">width</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#393a34"> </span><span style="color:#b58451">height</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">canvas</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">document</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getElementById</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'canvas'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">getContext</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#8e8f8b">      </span><span style="color:#a0ada0">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ctx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getContext</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'2d'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">x</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">y</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vx</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">1</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vy</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">3</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">25</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">color</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'blue'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#ab5959">function</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">beginPath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">arc</span><span style="color:#8e8f8b">(</span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">radius</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">Math</span><span style="color:#8e8f8b">.</span><span style="color:#a65e2b">PI</span><span style="color:#393a34"> </span><span style="color:#ab5959">*</span><span style="color:#393a34"> </span><span style="color:#296aa3">2</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#1c6b48">true</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">closePath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">fillStyle</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">color</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">fill</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">};</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">function</span><span style="color:#393a34"> </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">clearRect</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">width</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">height</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加速率</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">       </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="边界" tabindex="-1">边界 <a class="header-anchor" href="#边界" aria-hidden="true">#</a></h3><p>想让小球反弹那么我们就需要添加边界</p><pre><code class="language-html"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">&lt;!</span><span style="color:#429988">DOCTYPE</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">html</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">lang</span><span style="color:#858585">=</span><span style="color:#c98a7d">"en"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">charset</span><span style="color:#858585">=</span><span style="color:#c98a7d">"UTF-8"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">http-equiv</span><span style="color:#858585">=</span><span style="color:#c98a7d">"X-UA-Compatible"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"IE=edge"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">name</span><span style="color:#858585">=</span><span style="color:#c98a7d">"viewport"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"width=device-width, initial-scale=1.0"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span><span style="color:#dbd7ca">canvas - 裁剪</span><span style="color:#858585">&lt;/</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#758575">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">box-shadow</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">5</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">ccc</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">border-radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">8</span><span style="color:#cb7676">px</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">id</span><span style="color:#858585">=</span><span style="color:#c98a7d">"canvas"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">width</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">height</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">canvas</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">document</span><span style="color:#858585">.</span><span style="color:#a1b567">getElementById</span><span style="color:#858585">(</span><span style="color:#c98a7d">'canvas'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#858585">(</span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">getContext</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#858585">      </span><span style="color:#758575">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ctx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#a1b567">getContext</span><span style="color:#858585">(</span><span style="color:#c98a7d">'2d'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">x</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">y</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vx</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">1</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vy</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">3</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">25</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">color</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'blue'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#a1b567">draw</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">function</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">beginPath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">arc</span><span style="color:#858585">(</span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">radius</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">Math</span><span style="color:#858585">.</span><span style="color:#d4976c">PI</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">*</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">2</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">true</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">closePath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#b8a965">fillStyle</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">color</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">fill</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">};</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">function</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">draw</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">clearRect</span><span style="color:#858585">(</span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">width</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">height</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加速率</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加边界</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">height</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">||</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">width</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">||</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">       </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">&lt;!</span><span style="color:#2f8a89">DOCTYPE</span><span style="color:#393a34"> </span><span style="color:#b58451">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">html</span><span style="color:#393a34"> </span><span style="color:#b58451">lang</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"en"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">charset</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"UTF-8"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">http-equiv</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"X-UA-Compatible"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"IE=edge"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">name</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"viewport"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"width=device-width, initial-scale=1.0"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span><span style="color:#393a34">canvas - 裁剪</span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#a0ada0">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">box-shadow</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">5</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">ccc</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">border-radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">8</span><span style="color:#ab5959">px</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#b58451">id</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"canvas"</span><span style="color:#393a34"> </span><span style="color:#b58451">width</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#393a34"> </span><span style="color:#b58451">height</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">canvas</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">document</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getElementById</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'canvas'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">getContext</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#8e8f8b">      </span><span style="color:#a0ada0">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ctx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getContext</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'2d'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">x</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">y</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vx</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">1</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vy</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">3</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">25</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">color</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'blue'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#ab5959">function</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">beginPath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">arc</span><span style="color:#8e8f8b">(</span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">radius</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">Math</span><span style="color:#8e8f8b">.</span><span style="color:#a65e2b">PI</span><span style="color:#393a34"> </span><span style="color:#ab5959">*</span><span style="color:#393a34"> </span><span style="color:#296aa3">2</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#1c6b48">true</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">closePath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">fillStyle</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">color</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">fill</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">};</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">function</span><span style="color:#393a34"> </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">clearRect</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">width</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">height</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加速率</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加边界</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">height</span><span style="color:#393a34"> </span><span style="color:#ab5959">||</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">width</span><span style="color:#393a34"> </span><span style="color:#ab5959">||</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">       </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="加速度" tabindex="-1">加速度 <a class="header-anchor" href="#加速度" aria-hidden="true">#</a></h3><p>为了让动作更真实，我们还需要加入加速度的处理。</p><pre><code class="language-html"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">&lt;!</span><span style="color:#429988">DOCTYPE</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">html</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">lang</span><span style="color:#858585">=</span><span style="color:#c98a7d">"en"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">charset</span><span style="color:#858585">=</span><span style="color:#c98a7d">"UTF-8"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">http-equiv</span><span style="color:#858585">=</span><span style="color:#c98a7d">"X-UA-Compatible"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"IE=edge"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">name</span><span style="color:#858585">=</span><span style="color:#c98a7d">"viewport"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"width=device-width, initial-scale=1.0"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span><span style="color:#dbd7ca">canvas - 裁剪</span><span style="color:#858585">&lt;/</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#758575">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">box-shadow</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">5</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">ccc</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">border-radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">8</span><span style="color:#cb7676">px</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">id</span><span style="color:#858585">=</span><span style="color:#c98a7d">"canvas"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">width</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">height</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">canvas</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">document</span><span style="color:#858585">.</span><span style="color:#a1b567">getElementById</span><span style="color:#858585">(</span><span style="color:#c98a7d">'canvas'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#858585">(</span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">getContext</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#858585">      </span><span style="color:#758575">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ctx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#a1b567">getContext</span><span style="color:#858585">(</span><span style="color:#c98a7d">'2d'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">x</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">y</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vx</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">1</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vy</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">3</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">25</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">color</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'blue'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#a1b567">draw</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">function</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">beginPath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">arc</span><span style="color:#858585">(</span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">radius</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">Math</span><span style="color:#858585">.</span><span style="color:#d4976c">PI</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">*</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">2</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">true</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">closePath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#b8a965">fillStyle</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">color</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">fill</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">};</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">function</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">draw</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">clearRect</span><span style="color:#858585">(</span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">width</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">height</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加加速度</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">*=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">.99</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">.25</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加速率</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加边界</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">height</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">||</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">width</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">||</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">       </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">&lt;!</span><span style="color:#2f8a89">DOCTYPE</span><span style="color:#393a34"> </span><span style="color:#b58451">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">html</span><span style="color:#393a34"> </span><span style="color:#b58451">lang</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"en"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">charset</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"UTF-8"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">http-equiv</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"X-UA-Compatible"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"IE=edge"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">name</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"viewport"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"width=device-width, initial-scale=1.0"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span><span style="color:#393a34">canvas - 裁剪</span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#a0ada0">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">box-shadow</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">5</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">ccc</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">border-radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">8</span><span style="color:#ab5959">px</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#b58451">id</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"canvas"</span><span style="color:#393a34"> </span><span style="color:#b58451">width</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#393a34"> </span><span style="color:#b58451">height</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">canvas</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">document</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getElementById</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'canvas'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">getContext</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#8e8f8b">      </span><span style="color:#a0ada0">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ctx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getContext</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'2d'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">x</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">y</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vx</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">1</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vy</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">3</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">25</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">color</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'blue'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#ab5959">function</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">beginPath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">arc</span><span style="color:#8e8f8b">(</span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">radius</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">Math</span><span style="color:#8e8f8b">.</span><span style="color:#a65e2b">PI</span><span style="color:#393a34"> </span><span style="color:#ab5959">*</span><span style="color:#393a34"> </span><span style="color:#296aa3">2</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#1c6b48">true</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">closePath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">fillStyle</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">color</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">fill</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">};</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">function</span><span style="color:#393a34"> </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">clearRect</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">width</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">height</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加加速度</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">*=</span><span style="color:#393a34"> </span><span style="color:#296aa3">.99</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#296aa3">.25</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加速率</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加边界</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">height</span><span style="color:#393a34"> </span><span style="color:#ab5959">||</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">width</span><span style="color:#393a34"> </span><span style="color:#ab5959">||</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">       </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="拖尾效果" tabindex="-1">拖尾效果 <a class="header-anchor" href="#拖尾效果" aria-hidden="true">#</a></h3><p>加一个拖尾效果：</p><pre><code class="language-html"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">&lt;!</span><span style="color:#429988">DOCTYPE</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">html</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">lang</span><span style="color:#858585">=</span><span style="color:#c98a7d">"en"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">charset</span><span style="color:#858585">=</span><span style="color:#c98a7d">"UTF-8"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">http-equiv</span><span style="color:#858585">=</span><span style="color:#c98a7d">"X-UA-Compatible"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"IE=edge"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">meta</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">name</span><span style="color:#858585">=</span><span style="color:#c98a7d">"viewport"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">content</span><span style="color:#858585">=</span><span style="color:#c98a7d">"width=device-width, initial-scale=1.0"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span><span style="color:#dbd7ca">canvas - 裁剪</span><span style="color:#858585">&lt;/</span><span style="color:#429988">title</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#758575">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">box-shadow</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">5</span><span style="color:#cb7676">px</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">ccc</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">border-radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">8</span><span style="color:#cb7676">px</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">style</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">head</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;</span><span style="color:#429988">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">id</span><span style="color:#858585">=</span><span style="color:#c98a7d">"canvas"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">width</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">height</span><span style="color:#858585">=</span><span style="color:#c98a7d">"500"</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">canvas</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">  &lt;</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">document</span><span style="color:#858585">.</span><span style="color:#a1b567">getElementById</span><span style="color:#858585">(</span><span style="color:#c98a7d">'canvas'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#858585">    </span><span style="color:#758575">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#858585">(</span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">getContext</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#858585">      </span><span style="color:#758575">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ctx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#a1b567">getContext</span><span style="color:#858585">(</span><span style="color:#c98a7d">'2d'</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">var</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">x</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">y</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">100</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vx</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">1</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">vy</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">3</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">25</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">color</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'blue'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#a1b567">draw</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">function</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">beginPath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">arc</span><span style="color:#858585">(</span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">radius</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">Math</span><span style="color:#858585">.</span><span style="color:#d4976c">PI</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">*</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">2</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">true</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">closePath</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#b8a965">fillStyle</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">this</span><span style="color:#858585">.</span><span style="color:#b8a965">color</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">fill</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">};</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">function</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">draw</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// ctx.clearRect(0, 0, canvas.width, canvas.height);</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 用带透明度的矩形代替清空</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#b8a965">fillStyle</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'rgba(255, 255, 255, 0.3)'</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">fillRect</span><span style="color:#858585">(</span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">width</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">height</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加加速度</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">*=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">.995</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">.15</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加速率</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">        </span><span style="color:#758575">// 添加边界</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">height</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">||</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vy</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">canvas</span><span style="color:#858585">.</span><span style="color:#b8a965">width</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">||</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">+</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#b8a965">vx</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">       </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">window</span><span style="color:#858585">.</span><span style="color:#a1b567">requestAnimationFrame</span><span style="color:#858585">(</span><span style="color:#b8a965">draw</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">ball</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">&lt;/</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">body</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">html</span><span style="color:#858585">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">&lt;!</span><span style="color:#2f8a89">DOCTYPE</span><span style="color:#393a34"> </span><span style="color:#b58451">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">html</span><span style="color:#393a34"> </span><span style="color:#b58451">lang</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"en"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">charset</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"UTF-8"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">http-equiv</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"X-UA-Compatible"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"IE=edge"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">meta</span><span style="color:#393a34"> </span><span style="color:#b58451">name</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"viewport"</span><span style="color:#393a34"> </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"width=device-width, initial-scale=1.0"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span><span style="color:#393a34">canvas - 裁剪</span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">title</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#a0ada0">/* 给画布增加一个阴影和圆角的样式 */</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">box-shadow</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#296aa3">5</span><span style="color:#ab5959">px</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">ccc</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">border-radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">8</span><span style="color:#ab5959">px</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">style</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">head</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">canvas</span><span style="color:#393a34"> </span><span style="color:#b58451">id</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"canvas"</span><span style="color:#393a34"> </span><span style="color:#b58451">width</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#393a34"> </span><span style="color:#b58451">height</span><span style="color:#8e8f8b">=</span><span style="color:#b56959">"500"</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">    当前浏览器不支持canvas元素，请升级或更换浏览器！</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">canvas</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">  &lt;</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 获取 canvas 元素</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">document</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getElementById</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'canvas'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#8e8f8b">    </span><span style="color:#a0ada0">// 通过判断getContext方法是否存在来判断浏览器的支持性</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">getContext</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#8e8f8b">      </span><span style="color:#a0ada0">// 获取绘图上下文</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ctx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getContext</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'2d'</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">var</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">x</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">y</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">100</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vx</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">1</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">vy</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">3</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">25</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">color</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'blue'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#ab5959">function</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">beginPath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">arc</span><span style="color:#8e8f8b">(</span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">radius</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">Math</span><span style="color:#8e8f8b">.</span><span style="color:#a65e2b">PI</span><span style="color:#393a34"> </span><span style="color:#ab5959">*</span><span style="color:#393a34"> </span><span style="color:#296aa3">2</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#1c6b48">true</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">closePath</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">fillStyle</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#a65e2b">this</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">color</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">fill</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">};</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">function</span><span style="color:#393a34"> </span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// ctx.clearRect(0, 0, canvas.width, canvas.height);</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 用带透明度的矩形代替清空</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">fillStyle</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#b56959">'rgba(255, 255, 255, 0.3)'</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">fillRect</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">width</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">height</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加加速度</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">*=</span><span style="color:#393a34"> </span><span style="color:#296aa3">.995</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#296aa3">.15</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加速率</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+=</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">        </span><span style="color:#a0ada0">// 添加边界</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">height</span><span style="color:#393a34"> </span><span style="color:#ab5959">||</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vy</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;</span><span style="color:#393a34"> </span><span style="color:#8c862b">canvas</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">width</span><span style="color:#393a34"> </span><span style="color:#ab5959">||</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">+</span><span style="color:#393a34"> </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">vx</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">       </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">window</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">requestAnimationFrame</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">draw</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">ball</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">body</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">html</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"></span></code></pre></div></code></pre><h2 id="在taro中使用canvas" tabindex="-1">在taro中使用canvas <a class="header-anchor" href="#在taro中使用canvas" aria-hidden="true">#</a></h2><p>最近在写taro的项目时用到了canvas在其中画一个添加的样式，在taro中使用总体上与微信小程序一致。很简单的画了两条线。</p><pre><code class="language-tsx"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">View</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">Canvas</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"@tarojs/components"</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">Taro</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"@tarojs/taro"</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">useEffect</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">useState</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"react"</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">styles</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"./index.module.css"</span><span style="color:#858585">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">HFloatingButton</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#858585">[</span><span style="color:#d4976c">outStartCoordinate</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">setOutStartCoordinate</span><span style="color:#858585">]</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">useState</span><span style="color:#858585">([</span><span style="color:#6394bf">0</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">]);</span><span style="color:#dbd7ca"> </span><span style="color:#758575">// 移动前的位置</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#858585">[</span><span style="color:#d4976c">outMoveCoordinate</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">setOutMoveCoordinate</span><span style="color:#858585">]</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">useState</span><span style="color:#858585">([</span><span style="color:#6394bf">330</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">570</span><span style="color:#858585">]);</span><span style="color:#dbd7ca"> </span><span style="color:#758575">// 移动后的位置</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#858585">[</span><span style="color:#d4976c">constraintSize</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">setConstraintSize</span><span style="color:#858585">]</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">useState</span><span style="color:#858585">&lt;</span><span style="color:#a1b567">Array</span><span style="color:#858585">&lt;</span><span style="color:#e0a569">number</span><span style="color:#858585">&gt;&gt;([]);</span><span style="color:#dbd7ca"> </span><span style="color:#758575">// 可视区的范围</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585">  </span><span style="color:#758575">// 获取可视区的范围</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#a1b567">useEffect</span><span style="color:#858585">(()</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">res</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">Taro</span><span style="color:#858585">.</span><span style="color:#a1b567">getSystemInfoSync</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#a1b567">setConstraintSize</span><span style="color:#858585">([</span><span style="color:#b8a965">res</span><span style="color:#858585">.</span><span style="color:#b8a965">windowWidth</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">res</span><span style="color:#858585">.</span><span style="color:#b8a965">windowHeight</span><span style="color:#858585">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">ctx</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">Taro</span><span style="color:#858585">.</span><span style="color:#a1b567">createCanvasContext</span><span style="color:#858585">(</span><span style="color:#c98a7d">"myCanvas"</span><span style="color:#858585">);</span><span style="color:#dbd7ca"> </span><span style="color:#758575">//此处开始绘画</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">moveTo</span><span style="color:#858585">(</span><span style="color:#6394bf">7</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">22.5</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">lineTo</span><span style="color:#858585">(</span><span style="color:#6394bf">37</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">22.5</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">setLineWidth</span><span style="color:#858585">(</span><span style="color:#6394bf">2.5</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">moveTo</span><span style="color:#858585">(</span><span style="color:#6394bf">22.5</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">7</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">lineTo</span><span style="color:#858585">(</span><span style="color:#6394bf">22.5</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">37</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">setStrokeStyle</span><span style="color:#858585">(</span><span style="color:#c98a7d">"white"</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">stroke</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">ctx</span><span style="color:#858585">.</span><span style="color:#a1b567">draw</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">},</span><span style="color:#dbd7ca"> </span><span style="color:#858585">[]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585">  </span><span style="color:#758575">// 判断是否超出边界</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">compareIsBeyond</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">x</span><span style="color:#cb7676">:</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">number</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">y</span><span style="color:#cb7676">:</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">number</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">constraintSize</span><span style="color:#858585">[</span><span style="color:#6394bf">0</span><span style="color:#858585">]</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">45</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">constraintSize</span><span style="color:#858585">[</span><span style="color:#6394bf">0</span><span style="color:#858585">]</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">45</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">else</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">45</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">else</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">x</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">22.5</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&gt;=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">constraintSize</span><span style="color:#858585">[</span><span style="color:#6394bf">1</span><span style="color:#858585">]</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">45</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">constraintSize</span><span style="color:#858585">[</span><span style="color:#6394bf">0</span><span style="color:#858585">]</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">45</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">else</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">&lt;</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">45</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">0</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">else</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">y</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">-=</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">22.5</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">return</span><span style="color:#dbd7ca"> </span><span style="color:#858585">[</span><span style="color:#b8a965">x</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">y</span><span style="color:#858585">];</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#4d9375">return</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;</span><span style="color:#e0a569">View</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">className</span><span style="color:#cb7676">=</span><span style="color:#858585">{</span><span style="color:#b8a965">styles</span><span style="color:#858585">[</span><span style="color:#c98a7d">"out-circle"</span><span style="color:#858585">]}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">style</span><span style="color:#cb7676">=</span><span style="color:#858585">{{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">width</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"45px"</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">height</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"45px"</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">left</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">`</span><span style="color:#858585">${</span><span style="color:#c98a7d">outMoveCoordinate</span><span style="color:#858585">[</span><span style="color:#6394bf">0</span><span style="color:#858585">]</span><span style="color:#858585">}</span><span style="color:#c98a7d">px`</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">top</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">`</span><span style="color:#858585">${</span><span style="color:#c98a7d">outMoveCoordinate</span><span style="color:#858585">[</span><span style="color:#6394bf">1</span><span style="color:#858585">]</span><span style="color:#858585">}</span><span style="color:#c98a7d">px`</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">onTouchStart</span><span style="color:#cb7676">=</span><span style="color:#858585">{</span><span style="color:#b8a965">e</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">clientX</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">clientY</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">e</span><span style="color:#858585">.</span><span style="color:#b8a965">changedTouches</span><span style="color:#858585">[</span><span style="color:#6394bf">0</span><span style="color:#858585">];</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#a1b567">setOutStartCoordinate</span><span style="color:#858585">([</span><span style="color:#b8a965">clientX</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">clientY</span><span style="color:#858585">]);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}}</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">onTouchMove</span><span style="color:#cb7676">=</span><span style="color:#858585">{</span><span style="color:#b8a965">e</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#b8a965">e</span><span style="color:#858585">.</span><span style="color:#a1b567">stopPropagation</span><span style="color:#858585">();</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#cb7676">let</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">clientX</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">clientY</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">e</span><span style="color:#858585">.</span><span style="color:#b8a965">changedTouches</span><span style="color:#858585">[</span><span style="color:#6394bf">0</span><span style="color:#858585">];</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#cb7676">let</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">res</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">compareIsBeyond</span><span style="color:#858585">(</span><span style="color:#b8a965">clientX</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">clientY</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#a1b567">setOutMoveCoordinate</span><span style="color:#858585">(</span><span style="color:#b8a965">res</span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}}</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">&lt;&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">{</span><span style="color:#c98a7d">" "</span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">&lt;</span><span style="color:#e0a569">Canvas</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#e0a569">canvasId</span><span style="color:#cb7676">=</span><span style="color:#c98a7d">"myCanvas"</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#e0a569">id</span><span style="color:#cb7676">=</span><span style="color:#c98a7d">"myCanvas"</span></span>
<span class="line"><span style="color:#dbd7ca">          </span><span style="color:#e0a569">style</span><span style="color:#cb7676">=</span><span style="color:#858585">{{</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">width</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"45px"</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">height</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"45px"</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}}</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#858585">&gt;&lt;/</span><span style="color:#e0a569">Canvas</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">&lt;/&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;/</span><span style="color:#e0a569">View</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#858585">};</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#8c862b">View</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">Canvas</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">"@tarojs/components"</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8c862b">Taro</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">"@tarojs/taro"</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#8c862b">useEffect</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">useState</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">"react"</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8c862b">styles</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">"./index.module.css"</span><span style="color:#8e8f8b">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#6c7834">HFloatingButton</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#ab5959">=&gt;</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">[</span><span style="color:#a65e2b">outStartCoordinate</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">setOutStartCoordinate</span><span style="color:#8e8f8b">]</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">useState</span><span style="color:#8e8f8b">([</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">]);</span><span style="color:#393a34"> </span><span style="color:#a0ada0">// 移动前的位置</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">[</span><span style="color:#a65e2b">outMoveCoordinate</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">setOutMoveCoordinate</span><span style="color:#8e8f8b">]</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">useState</span><span style="color:#8e8f8b">([</span><span style="color:#296aa3">330</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">570</span><span style="color:#8e8f8b">]);</span><span style="color:#393a34"> </span><span style="color:#a0ada0">// 移动后的位置</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">[</span><span style="color:#a65e2b">constraintSize</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">setConstraintSize</span><span style="color:#8e8f8b">]</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">useState</span><span style="color:#8e8f8b">&lt;</span><span style="color:#6c7834">Array</span><span style="color:#8e8f8b">&lt;</span><span style="color:#b58451">number</span><span style="color:#8e8f8b">&gt;&gt;([]);</span><span style="color:#393a34"> </span><span style="color:#a0ada0">// 可视区的范围</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8e8f8b">  </span><span style="color:#a0ada0">// 获取可视区的范围</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#6c7834">useEffect</span><span style="color:#8e8f8b">(()</span><span style="color:#393a34"> </span><span style="color:#ab5959">=&gt;</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">res</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">Taro</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">getSystemInfoSync</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#6c7834">setConstraintSize</span><span style="color:#8e8f8b">([</span><span style="color:#8c862b">res</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">windowWidth</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">res</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">windowHeight</span><span style="color:#8e8f8b">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">ctx</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">Taro</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">createCanvasContext</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">"myCanvas"</span><span style="color:#8e8f8b">);</span><span style="color:#393a34"> </span><span style="color:#a0ada0">//此处开始绘画</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">moveTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">7</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">22.5</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">lineTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">37</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">22.5</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">setLineWidth</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">2.5</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">moveTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">22.5</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">7</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">lineTo</span><span style="color:#8e8f8b">(</span><span style="color:#296aa3">22.5</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#296aa3">37</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">setStrokeStyle</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">"white"</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">stroke</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">ctx</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">draw</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">},</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">[]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8e8f8b">  </span><span style="color:#a0ada0">// 判断是否超出边界</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#6c7834">compareIsBeyond</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">x</span><span style="color:#ab5959">:</span><span style="color:#393a34"> </span><span style="color:#b58451">number</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">y</span><span style="color:#ab5959">:</span><span style="color:#393a34"> </span><span style="color:#b58451">number</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#ab5959">=&gt;</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;=</span><span style="color:#393a34"> </span><span style="color:#8c862b">constraintSize</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">]</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#393a34"> </span><span style="color:#296aa3">45</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">constraintSize</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">]</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#393a34"> </span><span style="color:#296aa3">45</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">else</span><span style="color:#393a34"> </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">45</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">else</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">x</span><span style="color:#393a34"> </span><span style="color:#ab5959">-=</span><span style="color:#393a34"> </span><span style="color:#296aa3">22.5</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">&gt;=</span><span style="color:#393a34"> </span><span style="color:#8c862b">constraintSize</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">1</span><span style="color:#8e8f8b">]</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#393a34"> </span><span style="color:#296aa3">45</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">constraintSize</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">]</span><span style="color:#393a34"> </span><span style="color:#ab5959">-</span><span style="color:#393a34"> </span><span style="color:#296aa3">45</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">else</span><span style="color:#393a34"> </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">&lt;</span><span style="color:#393a34"> </span><span style="color:#296aa3">45</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">else</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">y</span><span style="color:#393a34"> </span><span style="color:#ab5959">-=</span><span style="color:#393a34"> </span><span style="color:#296aa3">22.5</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">return</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">[</span><span style="color:#8c862b">x</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">y</span><span style="color:#8e8f8b">];</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#1c6b48">return</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;</span><span style="color:#b58451">View</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">className</span><span style="color:#ab5959">=</span><span style="color:#8e8f8b">{</span><span style="color:#8c862b">styles</span><span style="color:#8e8f8b">[</span><span style="color:#b56959">"out-circle"</span><span style="color:#8e8f8b">]}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">style</span><span style="color:#ab5959">=</span><span style="color:#8e8f8b">{{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">width</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">"45px"</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">height</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">"45px"</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">left</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">`</span><span style="color:#8e8f8b">${</span><span style="color:#b56959">outMoveCoordinate</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">]</span><span style="color:#8e8f8b">}</span><span style="color:#b56959">px`</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">top</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">`</span><span style="color:#8e8f8b">${</span><span style="color:#b56959">outMoveCoordinate</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">1</span><span style="color:#8e8f8b">]</span><span style="color:#8e8f8b">}</span><span style="color:#b56959">px`</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">onTouchStart</span><span style="color:#ab5959">=</span><span style="color:#8e8f8b">{</span><span style="color:#8c862b">e</span><span style="color:#393a34"> </span><span style="color:#ab5959">=&gt;</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#a65e2b">clientX</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">clientY</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">e</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">changedTouches</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">];</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#6c7834">setOutStartCoordinate</span><span style="color:#8e8f8b">([</span><span style="color:#8c862b">clientX</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">clientY</span><span style="color:#8e8f8b">]);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}}</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">onTouchMove</span><span style="color:#ab5959">=</span><span style="color:#8e8f8b">{</span><span style="color:#8c862b">e</span><span style="color:#393a34"> </span><span style="color:#ab5959">=&gt;</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8c862b">e</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">stopPropagation</span><span style="color:#8e8f8b">();</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#ab5959">let</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#8c862b">clientX</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">clientY</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">e</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">changedTouches</span><span style="color:#8e8f8b">[</span><span style="color:#296aa3">0</span><span style="color:#8e8f8b">];</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#ab5959">let</span><span style="color:#393a34"> </span><span style="color:#8c862b">res</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">compareIsBeyond</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">clientX</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">clientY</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#6c7834">setOutMoveCoordinate</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">res</span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}}</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">&lt;&gt;</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">{</span><span style="color:#b56959">" "</span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">&lt;</span><span style="color:#b58451">Canvas</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#b58451">canvasId</span><span style="color:#ab5959">=</span><span style="color:#b56959">"myCanvas"</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#b58451">id</span><span style="color:#ab5959">=</span><span style="color:#b56959">"myCanvas"</span></span>
<span class="line"><span style="color:#393a34">          </span><span style="color:#b58451">style</span><span style="color:#ab5959">=</span><span style="color:#8e8f8b">{{</span><span style="color:#393a34"> </span><span style="color:#b58451">width</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">"45px"</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#b58451">height</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">"45px"</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}}</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#8e8f8b">&gt;&lt;/</span><span style="color:#b58451">Canvas</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">&lt;/&gt;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#b58451">View</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#8e8f8b">};</span></span>
<span class="line"></span></code></pre></div></code></pre><pre><code class="language-css"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">.</span><span style="color:#e0a569">out-circle</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#e0a569">border-radius</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#6394bf">50</span><span style="color:#cb7676">%</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#e0a569">background-color</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">5956E9</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#e0a569">position</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">fixed</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">}</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">.</span><span style="color:#b58451">out-circle</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#b58451">border-radius</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#296aa3">50</span><span style="color:#ab5959">%</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#b58451">background-color</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">5956E9</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#b58451">position</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#a65e2b">fixed</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">}</span></span>
<span class="line"></span></code></pre></div></code></pre><p>(<a href="https://taro-docs.jd.com/docs/apis/canvas/CanvasContext" target="_blank" rel="noopener">参考文档| Taro 文档 </a>)</p></div><!--]--></article><div class="prose m-auto mt-8 mb-8"><br><a href="/posts" class="font-mono no-underline opacity-50 hover:opacity-75">exit ..</a></div><!--]--><div class="mt-10 mb-6 prose m-auto opacity-50 flex"><span class="text-sm"><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color:inherit">CC BY-NC-SA 4.0</a> 2021-PRESENT © Bohua Xu</span><div class="flex-auto"></div></div></main><!--]--></div><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><link rel="stylesheet" href="/assets/index.372f6e0e.css"></body></html>