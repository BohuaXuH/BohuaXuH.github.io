<!DOCTYPE html><html lang="en"><head><!-- Google Tag Manager --><script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});n=t.getElementsByTagName(a)[0],a=t.createElement(a);a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id=GTM-5CKG5K6F",n.parentNode.insertBefore(a,n)}(window,document,"script","dataLayer")</script><!-- End Google Tag Manager --><meta charset="UTF-8"><meta name="author" content="xu"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="revisit-after" content="7 days"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="alternate" type="application/rss+xml" title="XUBOHUA's Blog" href="/feed.xml"><meta name="msapplication-TileColor" content="#ffffff"><meta name="theme-color" content="#ffffff"><title>Why Breaking Up with CSS-in-JS</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FEHZ75481G"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-FEHZ75481G")</script><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" crossorigin="" src="/assets/app.b53e5933.js"></script><style>*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}blockquote,h1,h2,h3,p,pre{margin:0}ol,ul{list-style:none;margin:0;padding:0}img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}:root{--c-bg:#fff;--c-scrollbar:#eee;--c-scrollbar-hover:#bbb}html{background-color:var(--c-bg)}html{overflow:scroll}*{scrollbar-color:var(--c-scrollbar) var(--c-bg)}.prose{color:var(--fg);max-width:65ch;font-size:1rem;line-height:1.75}.prose a{color:var(--fg-deeper);text-decoration:none;font-weight:500}.prose strong{color:var(--fg-deep);font-weight:600}.prose ol>li{position:relative;padding-left:1.75em}.prose ol>li:before{content:counter(list-item,var(--list-counter-style,decimal)) ".";position:absolute;font-weight:400;color:#6b7280;left:0}.prose ul>li{position:relative;padding-left:1.75em}.prose ul>li:before{content:"";position:absolute;background-color:#d1d5db;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.prose blockquote{font-weight:500;font-style:italic;color:inherit;border-left-width:.25rem;border-color:#7d7d7d4d;quotes:"\201c""\201d""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.prose blockquote p:first-of-type:before{content:open-quote}.prose blockquote p:last-of-type:after{content:close-quote}.prose h1{color:var(--fg-deeper);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose h2{color:var(--fg-deep);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose h3{color:inherit;font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6;opacity:.7}.prose code{color:var(--fg-deep);font-weight:600;font-size:.875em}.prose code:before{content:"`"}.prose code:after{content:"`"}.prose a code{color:#111827}.prose pre{color:#e5e7eb;overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose pre code{background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:400;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose pre code:before{content:none}.prose pre code:after{content:none}.prose p{margin-top:1.25em;margin-bottom:1.25em}.prose img{margin-top:2em;margin-bottom:2em}.prose ol,.prose ul{margin-top:1.25em;margin-bottom:1.25em;list-style-type:none}.prose li{margin-top:.5em;margin-bottom:.5em}.prose ul ul{margin-top:.75em;margin-bottom:.75em}.prose h2+*{margin-top:0}.prose h3+*{margin-top:0}.prose>:first-child{margin-top:0}.prose>:last-child{margin-bottom:0}.prose em{color:inherit}.prose pre:not(.shiki){padding:0;margin:0;background:0 0}.prose .shiki{font-family:DM Mono,Input Mono,Fira Code,monospace;font-size:1.05em;line-height:1.4;margin:.5em 0}.prose img{width:100%}.shiki-light{background:#f8f8f8!important}.shiki-dark{background:#0e0e0e!important}html:not(.dark) .shiki-dark{display:none}.prose{--fg:#555;--fg-deep:#222;--fg-deeper:#000;color:var(--fg)}.prose a{font-weight:inherit;text-decoration:none;border-bottom:1px solid rgba(125,125,125,.3);transition:border .3s ease-in-out}.prose a:hover{border-bottom:1px solid var(--fg)}.prose a code{color:inherit}a.header-anchor{float:left;margin-top:.125em;margin-left:-1.2em;padding-right:.5em;font-size:.85em;opacity:0;text-decoration:none;border:0!important}a.header-anchor:focus,a.header-anchor:hover{text-decoration:none}h2:focus .header-anchor,h2:hover .header-anchor,h3:focus .header-anchor,h3:hover .header-anchor{opacity:.5}.prose blockquote{font-weight:400;font-style:normal;line-height:1.5em;padding:.6em 1.2em;opacity:.8}.prose blockquote>:first-child{margin-top:0}.prose blockquote>:last-child{margin-bottom:0}.prose blockquote p:first-of-type:before{content:none}.prose blockquote p:first-of-type:after{content:none}@media (max-width:1200px){.table-of-contents{display:none}}.table-of-contents{position:fixed;top:80px;padding-top:70px;font-size:.8em;right:10px;width:200px;bottom:0;overflow-y:auto;overflow-x:hidden;text-overflow:ellipsis;opacity:0;transition:all .4s ease-out}.table-of-contents:hover{opacity:.5}.table-of-contents ul>li:before{display:none}.table-of-contents ul>li{padding-left:.8rem}*,::after,::before{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-scroll-snap-strictness:proximity;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow:0 0 rgba(0,0,0,0);--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5)}[i-bi-badge-3d=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 16 16' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cg fill='currentColor'%3E%3Cpath d='M4.52 8.368h.664c.646 0 1.055.378 1.06.9c.008.537-.427.919-1.086.919c-.598-.004-1.037-.325-1.068-.756H3c.03.914.791 1.688 2.153 1.688c1.24 0 2.285-.66 2.272-1.798c-.013-.953-.747-1.38-1.292-1.432v-.062c.44-.07 1.125-.527 1.108-1.375c-.013-.906-.8-1.57-2.053-1.565c-1.31.005-2.043.734-2.074 1.67h1.103c.022-.391.383-.751.936-.751c.532 0 .928.33.928.813c.004.479-.383.835-.928.835h-.632v.914zm3.606-3.367V11h2.189C12.125 11 13 9.893 13 7.985c0-1.894-.861-2.984-2.685-2.984H8.126zm1.187.967h.844c1.112 0 1.621.686 1.621 2.04c0 1.353-.505 2.02-1.621 2.02h-.844v-4.06z'/%3E%3Cpath d='M14 3a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h12zM2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2z'/%3E%3C/g%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-material-symbols-edit-document-outline-rounded=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M6 22q-.825 0-1.412-.587Q4 20.825 4 20V4q0-.825.588-1.413Q5.175 2 6 2h7.175q.4 0 .763.15q.362.15.637.425l4.85 4.85q.275.275.425.637q.15.363.15.763V12h-2V9h-4q-.425 0-.712-.288Q13 8.425 13 8V4H6v16h6v2Zm0-2V4v16Zm12.3-5.475l1.075 1.075l-3.875 3.85v1.05h1.05l3.875-3.85l1.05 1.05l-4 4q-.15.15-.338.225q-.187.075-.387.075H14.5q-.2 0-.35-.15q-.15-.15-.15-.35v-2.25q0-.2.075-.387q.075-.188.225-.338Zm3.175 3.175L18.3 14.525l1.45-1.45q.275-.275.7-.275q.425 0 .7.275l1.775 1.775q.275.275.275.7q0 .425-.275.7Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-article-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M20 22H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1zm-1-2V4H5v16h14zM7 6h4v4H7V6zm0 6h10v2H7v-2zm0 4h10v2H7v-2zm6-9h4v2h-4V7z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-lightbulb-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M9.973 18H11v-5h2v5h1.027c.132-1.202.745-2.194 1.74-3.277c.113-.122.832-.867.917-.973a6 6 0 1 0-9.37-.002c.086.107.807.853.918.974c.996 1.084 1.609 2.076 1.741 3.278zM10 20v1h4v-1h-4zm-4.246-5a8 8 0 1 1 12.49.002C17.624 15.774 16 17 16 18.5V21a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.5C8 17 6.375 15.774 5.754 15z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-uil-github-alt=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg preserveAspectRatio='xMidYMid meet' viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M10.07 20.503a1 1 0 0 0-1.18-.983c-1.31.24-2.963.276-3.402-.958a5.708 5.708 0 0 0-1.837-2.415a1.2 1.2 0 0 1-.167-.11a1 1 0 0 0-.93-.645h-.005a1 1 0 0 0-1 .995c-.004.815.81 1.338 1.141 1.514a4.44 4.44 0 0 1 .924 1.36c.365 1.023 1.423 2.576 4.466 2.376l.003.098l.004.268a1 1 0 0 0 2 0l-.005-.318c-.005-.19-.012-.464-.012-1.182ZM20.737 5.377a5.39 5.39 0 0 0 .09-.42a6.278 6.278 0 0 0-.408-3.293a1.002 1.002 0 0 0-.615-.58c-.356-.12-1.67-.357-4.184 1.25a13.87 13.87 0 0 0-6.354 0C6.762.75 5.455.966 5.102 1.079a.997.997 0 0 0-.631.584a6.3 6.3 0 0 0-.404 3.357c.025.127.051.246.079.354a6.27 6.27 0 0 0-1.256 3.83a8.422 8.422 0 0 0 .043.921c.334 4.603 3.334 5.984 5.424 6.459a4.591 4.591 0 0 0-.118.4a1 1 0 0 0 1.942.479a1.678 1.678 0 0 1 .468-.878a1 1 0 0 0-.546-1.745c-3.454-.395-4.954-1.802-5.18-4.899a6.61 6.61 0 0 1-.033-.738a4.258 4.258 0 0 1 .92-2.713a3.022 3.022 0 0 1 .195-.231a1 1 0 0 0 .188-1.025a3.388 3.388 0 0 1-.155-.555a4.094 4.094 0 0 1 .079-1.616a7.543 7.543 0 0 1 2.415 1.18a1.009 1.009 0 0 0 .827.133a11.777 11.777 0 0 1 6.173.001a1.005 1.005 0 0 0 .83-.138a7.572 7.572 0 0 1 2.406-1.19a4.04 4.04 0 0 1 .087 1.578a3.205 3.205 0 0 1-.169.607a1 1 0 0 0 .188 1.025c.078.087.155.18.224.268A4.122 4.122 0 0 1 20 9.203a7.039 7.039 0 0 1-.038.777c-.22 3.056-1.725 4.464-5.195 4.86a1 1 0 0 0-.546 1.746a1.63 1.63 0 0 1 .466.908a3.06 3.06 0 0 1 .093.82v2.333c-.01.648-.01 1.133-.01 1.356a1 1 0 1 0 2 0c0-.217 0-.692.01-1.34v-2.35a4.881 4.881 0 0 0-.155-1.311a4.256 4.256 0 0 0-.116-.416a6.513 6.513 0 0 0 5.445-6.424A8.697 8.697 0 0 0 22 9.203a6.13 6.13 0 0 0-1.263-3.826Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}.absolute{position:absolute}.z-40{z-index:40}.m-5{margin:1.25rem}.m-auto{margin:auto}.\!-mt-2{margin-top:-.5rem!important}.mb-0{margin-bottom:0}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-10{margin-top:2.5rem}.mt-8{margin-top:2rem}.inline{display:inline}.h-12{height:3rem}.w-12{width:3rem}.flex{display:flex}.flex-auto{flex:1 1 auto}.select-none{user-select:none}[fill~=none]{fill:none}[stroke-width~="\32 "]{stroke-width:2px}[stroke-width~="\34 "]{stroke-width:4px}[stroke~=black]{--un-stroke-opacity:1;stroke:rgba(0,0,0,var(--un-stroke-opacity))}.px-7{padding-left:1.75rem;padding-right:1.75rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.font-mono{font-family:"DM Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}.font-sans{font-family:Inter,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.text-sm{font-size:.875rem;line-height:1.25rem}.text-gray-700{--un-text-opacity:1;color:rgba(55,65,81,var(--un-text-opacity))}.no-underline{text-decoration:none}.opacity-50{opacity:.5}.hover\:opacity-75:hover{opacity:.75}.outline-none{outline:2px solid transparent;outline-offset:2px}@media (max-width:767.9px){.lt-md\:hidden{display:none}}@media (min-width:768px){.md\:hidden,[md\:hidden=""]{display:none}}@media (min-width:1024px){.lg\:fixed{position:fixed}}@media (prefers-reduced-motion){path[data-v-10f99b2b]{animation:none!important;stroke-dasharray:unset!important}}@keyframes grow-10f99b2b{0%{opacity:0}10%{opacity:1;transform:translateY(1%)}40%{transform:translate(0)}50%,to{stroke-dasharray:2000px 0}95%{opacity:1}to{opacity:0}}path[data-v-10f99b2b]{stroke-dashoffset:1px;stroke-dasharray:0 2000px;animation:grow-10f99b2b 12s ease forwards infinite;transform-origin:center;stroke:#303030;animation-delay:0s}.nav[data-v-2aa5d29f]{padding:2rem;width:100%;display:grid;grid-template-columns:auto max-content;box-sizing:border-box}.nav>[data-v-2aa5d29f]{margin:auto}.nav a[data-v-2aa5d29f]{cursor:pointer;text-decoration:none;color:inherit;transition:opacity .2s ease;opacity:.6;outline:0}.nav a[data-v-2aa5d29f]:hover{opacity:1;text-decoration-color:inherit}.nav .right[data-v-2aa5d29f]{display:grid;grid-gap:1.2rem;grid-auto-flow:column}.nav .right>[data-v-2aa5d29f]{margin:auto}</style><link rel="preload" href="/assets/index.7a5f51af.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/whybreakingccinjs.9ea34d16.js"><meta property="og:image" content="https://s1.imgbed.xyz/2022/09/23/kSyVq.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@XU"><meta property="og:title" content="Why  Breaking Up with CSS-in-JS"><meta property="og:description" content="Why We're Breaking Up with CSS-in-JS"><meta name="description" content="Why We're Breaking Up with CSS-in-JS"><meta name="head:count" content="6"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/dmmono/v14/aFTU7PB1QTsUX8KYhh0.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/inter/v18/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuLyfMZg.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/inter/v18/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuGKYMZg.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/inter/v18/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuDyYMZg.ttf"></head><body class="font-sans text-gray-700 dark:text-gray-200"><div id="app" data-server-rendered="true"><!--[--><header class="header z-40" data-v-2aa5d29f=""><a href="/" class="w-12 h-12 absolute lg:fixed m-5 select-none outline-none" focusable="false" data-v-2aa5d29f=""><svg viewBox="0 0 226 206" width="100" height="100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2aa5d29f="" data-v-10f99b2b=""><title data-v-10f99b2b="">© Bohua Xu</title><path d="M207.618 27.9436C208.818 31.8103 209.351 32.3436 209.351 30.2103C209.484 26.6103 207.351 21.9436 205.484 21.9436C204.818 21.9436 203.884 23.2769 203.351 24.877C202.951 26.477 199.751 30.6103 196.551 34.2103C189.618 41.5436 188.018 48.2103 190.684 58.7436C191.884 63.4103 191.884 66.077 190.684 69.5436C189.218 74.3436 190.951 81.9437 193.751 81.9437C197.218 81.9437 202.951 77.277 207.084 71.0103C215.751 57.9436 218.018 52.477 217.751 44.7436C217.751 38.6103 218.151 37.1436 220.951 35.0103C224.284 32.3436 225.218 28.6103 222.551 28.6103C221.751 28.6103 219.484 29.9436 217.751 31.5436L214.418 34.6103L215.218 28.6103C215.751 24.3436 216.951 22.077 219.351 20.2103C221.218 18.877 222.818 17.1436 222.818 16.477C222.818 14.2103 218.818 15.277 217.218 17.9436C215.218 21.1436 212.018 21.277 206.818 18.6103C200.951 15.5436 197.484 10.3436 198.284 5.94363C199.084 2.47697 197.484 -0.1897 195.618 1.54364C195.218 1.94363 194.818 3.8103 194.818 5.54364C194.818 8.6103 194.418 8.74363 190.551 7.67697C184.284 6.21031 156.151 6.34363 156.284 7.94363C156.284 8.74363 157.351 9.14364 158.684 9.01031C160.018 8.87698 162.151 9.81032 163.351 11.1436C165.484 13.4103 165.084 13.8103 157.218 17.4103C151.884 19.677 146.418 21.1436 142.551 21.1436C134.151 21.277 133.751 23.677 141.751 24.6103C149.751 25.5436 152.418 27.8103 148.684 30.6103C142.684 35.1436 136.551 37.277 128.951 37.277C123.884 37.277 120.818 37.8103 120.551 38.877C120.151 40.077 121.484 40.6103 124.684 40.6103C127.351 40.6103 129.484 41.277 129.484 41.9436C129.484 44.6103 120.551 48.7436 103.484 54.077C64.951 65.9436 50.4176 72.7437 39.0843 83.677C36.0176 86.7437 32.151 91.8103 30.6843 94.877C29.0843 98.3437 27.351 100.21 26.2843 99.8103C23.351 98.7437 16.551 106.744 13.4843 114.877C11.8843 119.01 9.75096 126.344 8.68429 131.144C7.61763 135.81 5.75096 141.41 4.68429 143.41C2.55096 147.677 2.28429 152.21 4.15096 152.877C4.95096 153.144 4.68429 155.944 3.35096 159.944C2.15096 163.944 1.21763 172.744 1.08429 182.077C0.817626 195.81 1.08429 197.944 3.35096 200.477C7.35096 204.877 6 188.5 6 188.5V187C6 186 9.56682 170.333 12.3668 165.667C14.5002 162.067 16.6846 158.077 17.0846 158.477C17.4846 158.744 16.9513 162.077 16.1513 165.677C14.4179 172.344 14.9513 176.61 17.4846 176.61C18.2846 176.61 18.8179 173.41 18.8179 169.144C18.8179 162.61 19.7513 159.944 25.4846 149.277C29.2179 142.477 32.1513 135.277 32.1513 133.144C32.1513 128.61 34.2846 127.01 46.1513 122.61C56.5513 118.61 70.9512 117.144 78.5512 119.144C81.6179 120.077 84.1512 121.144 84.1512 121.81C84.1512 123.944 76.5512 129.944 74.6846 129.277C71.8846 128.21 54.4179 137.144 48.8179 142.477C46.2846 145.01 44.1513 148.21 44.1513 149.677C44.1513 151.277 46.3184 155.277 48.2846 160.61C50.2508 165.944 52.818 169.41 47.618 184.077C43.8846 194.344 44.4179 199.944 49.3513 206.077L51.7513 209.144L53.618 205.81C54.9513 203.544 55.4846 197.41 55.4846 184.61V166.61L61.2179 155.944C64.4179 150.077 69.0846 142.344 71.7513 138.61C76.0179 132.877 76.6846 132.344 77.6179 134.61C79.6179 139.81 78.8179 143.144 74.0179 148.877C67.7512 156.21 64.1513 163.944 64.1513 170.21C64.1513 175.544 65.2179 179.277 66.8179 179.277C68.4179 179.277 74.6846 164.21 77.3512 154.077C79.2179 146.344 80.6846 143.81 85.0846 139.677C91.8846 133.277 93.0846 129.677 90.0179 125.01C88.4179 122.477 88.1513 121.277 89.3512 120.877C92.6846 119.81 104.018 109.944 104.818 107.41C105.618 104.61 109.618 103.144 122.818 100.61C137.751 97.8103 148.818 99.6769 159.085 106.744C164.951 110.877 167.218 116.344 165.351 121.81C164.151 125.144 163.218 125.677 157.485 126.344C153.885 126.744 148.551 128.344 145.618 129.944C139.751 132.877 134.951 139.944 137.351 142.344C139.085 144.077 151.085 138.344 158.285 132.077C161.351 129.544 166.551 126.744 169.885 125.944C183.885 122.344 185.885 114.21 176.285 99.8103L173.485 95.6769L183.751 96.3436C196.018 97.0103 201.751 99.1436 204.818 103.81C207.351 107.677 206.285 112.744 201.618 118.877L198.818 122.21L197.618 118.877C196.285 115.41 190.018 110.344 188.685 111.677C188.285 112.077 189.218 113.01 190.685 113.944C192.285 114.744 194.418 116.877 195.618 118.744C197.751 121.81 197.618 122.344 194.685 127.944C192.151 132.61 191.885 134.477 192.951 137.544C193.751 139.944 195.218 141.277 196.818 141.277C199.218 141.277 199.485 140.477 199.218 132.744C198.818 125.544 199.218 123.81 202.018 120.477C206.951 114.61 208.685 108.21 206.551 103.677C204.018 98.3436 197.218 95.6769 183.485 94.6103C174.685 93.8103 176.285 96.6103 173.485 94.6103" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-10f99b2b=""></path></svg></a><nav class="nav" data-v-2aa5d29f=""><div class="spacer" data-v-2aa5d29f=""></div><div class="right" data-v-2aa5d29f=""><a href="/posts" class="" title="Blog" data-v-2aa5d29f=""><span class="lt-md:hidden" data-v-2aa5d29f="">Blog</span><div i-ri-article-line="" md:hidden="" data-v-2aa5d29f=""></div></a><a href="/projects" class="" title="Projects" data-v-2aa5d29f=""><span class="lt-md:hidden" data-v-2aa5d29f="">Projects</span><div i-ri-lightbulb-line="" class="md:hidden" data-v-2aa5d29f=""></div></a><a href="/react" class="lt-md:hidden" title="React" data-v-2aa5d29f="">React </a><a href="/vue" class="lt-md:hidden" title="vue" data-v-2aa5d29f="">Vue </a><a href="/jottings" class="lt-md:hidden" title="jottings" data-v-2aa5d29f="">Jottings </a><a href="/wechat" class="" title="wechat" data-v-2aa5d29f=""><svg width="20" height="20" viewBox="0 0 48 48" data-v-2aa5d29f=""><g fill="none" data-v-2aa5d29f=""><path d="M36.997 21.711C36.843 13.008 29.74 6 21 6C12.163 6 5 13.163 5 22c0 4.17 1.595 7.968 4.209 10.815l-1.199 7.21l7.115-3.055c3.135 1.042 6.093 1.303 8.875.782" clip-rule="evenodd" data-v-2aa5d29f=""></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M36.997 21.711C36.843 13.008 29.74 6 21 6C12.163 6 5 13.163 5 22c0 4.17 1.595 7.968 4.209 10.815l-1.199 7.21l7.115-3.055c3.135 1.042 6.093 1.303 8.875.782" data-v-2aa5d29f=""></path><path fill="currentColor" d="M15.125 20.467a2.258 2.258 0 0 0 2.25-2.267a2.258 2.258 0 0 0-2.25-2.267a2.258 2.258 0 0 0-2.25 2.267a2.258 2.258 0 0 0 2.25 2.267Zm9 0a2.258 2.258 0 0 0 2.25-2.267a2.258 2.258 0 0 0-2.25-2.267a2.258 2.258 0 0 0-2.25 2.267a2.258 2.258 0 0 0 2.25 2.267Z" data-v-2aa5d29f=""></path><path d="M38.762 39.93A10.453 10.453 0 0 1 32.5 42C26.701 42 22 37.299 22 31.5S26.701 21 32.5 21S43 25.701 43 31.5c0 1.6-.358 3.116-.998 4.473" clip-rule="evenodd" data-v-2aa5d29f=""></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M38.762 39.93A10.453 10.453 0 0 1 32.5 42C26.701 42 22 37.299 22 31.5S26.701 21 32.5 21S43 25.701 43 31.5c0 1.6-.358 3.116-.998 4.473" data-v-2aa5d29f=""></path><path d="M42.002 35.973L43 42l-4.238-2.07" clip-rule="evenodd" data-v-2aa5d29f=""></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M42.002 35.973L43 42l-4.238-2.07" data-v-2aa5d29f=""></path><path fill="currentColor" d="M35.688 30.8A1.694 1.694 0 0 1 34 29.1c0-.939.755-1.7 1.688-1.7c.931 0 1.687.761 1.687 1.7s-.755 1.7-1.688 1.7Zm-6.75 0a1.694 1.694 0 0 1-1.688-1.7c0-.939.756-1.7 1.688-1.7c.931 0 1.687.761 1.687 1.7s-.756 1.7-1.688 1.7Z" data-v-2aa5d29f=""></path></g></svg></a><a href="https://xubohua.top/" target="_blank" title="notes" class="lt-md:hidden" data-v-2aa5d29f=""><div i-material-symbols-edit-document-outline-rounded="" data-v-2aa5d29f=""></div></a><a href="https://github.com/xubohuah" target="_blank" title="GitHub" class="lt-md:hidden" data-v-2aa5d29f=""><div i-uil-github-alt="" data-v-2aa5d29f=""></div></a><a href="https://3d.xubh.top" target="_blank" title="GitHub" class="lt-md:hidden" data-v-2aa5d29f=""><div i-bi-badge-3d="" data-v-2aa5d29f=""></div></a><a href="https://3d.xubh.top" target="_blank" title="GitHub" class="md:hidden" data-v-2aa5d29f=""><div i-bi-badge-3d="" data-v-2aa5d29f=""></div></a><a class="select-none" title="Toggle Color Scheme" data-v-2aa5d29f=""><svg style="vertical-align:sub;display:none" class="inline" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A7.999 7.999 0 0 0 4 12z"></path></svg><svg style="vertical-align:sub" class="inline" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></a></div></nav></header><main class="px-7 py-10"><!--[--><!----><div class="prose m-auto mb-8"><h1 class="mb-0">Why Breaking Up with CSS-in-JS</h1><p class="opacity-50 !-mt-2">Nov 15, 2022 <span>· 3min</span></p><!----></div><article><!--[--><div class="prose m-auto"><p></p><div class="table-of-contents"><ul><li><a href="#what-is-css-in-js">What is CSS-in-JS?</a></li><li><a href="#the-good-the-bad-and-the-ugly-of-css-in-js">The Good, The Bad, and the Ugly of CSS-in-JS</a><ul><li><a href="#the-good">The Good</a></li><li><a href="#the-neutral">The Neutral</a></li><li><a href="#the-bad">The Bad</a></li><li><a href="#the-ugly">The Ugly</a></li></ul></li><li><a href="#performance-deep-dive">Performance Deep Dive</a><ul><li><a href="#serialization-inside-of-render-vs-outside-of-render">Serialization Inside of Render vs. Outside of Render</a></li><li><a href="#benchmarking-the-member-browser">Benchmarking the Member Browser</a></li><li><a href="#analyzing-the-flamegraph">Analyzing the Flamegraph</a></li><li><a href="#benchmarking-the-member-browser-without-emotion">Benchmarking the Member Browser, without Emotion</a></li></ul></li><li><a href="#our-new-styling-system">Our New Styling System</a><ul><li><a href="#utility-classes">Utility Classes</a></li><li><a href="#a-note-about-compile-time-css-in-js">A Note about Compile-Time CSS-in-JS</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li><li><a href="#this-article-is-reprinted-from">This article is reprinted from</a></li></ul></div><p></p><p>Recently,I saw that Sam’s company gave up the css-in-js solution.The original text is very good,from the pros to the cons.The start with performance issues to explain why your company had to ditch css-in-js,and finally tell readers that their solution is css-modules.</p><h2 id="what-is-css-in-js" tabindex="-1">What is CSS-in-JS? <a class="header-anchor" href="#what-is-css-in-js" aria-hidden="true">#</a></h2><p>As the name suggests, CSS-in-JS allows you to style your React components by writing CSS directly in your JavaScript or TypeScript code:</p><pre><code class="language-js"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#758575">// @emotion/react (css prop), with object styles</span></span>
<span class="line"><span style="color:#cb7676">function</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">ErrorMessage</span><span style="color:#858585">({</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">children</span><span style="color:#dbd7ca"> </span><span style="color:#858585">})</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#4d9375">return</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;</span><span style="color:#429988">div</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">css</span><span style="color:#cb7676">=</span><span style="color:#858585">{{</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">color</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'red'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">        </span><span style="color:#e0a569">fontWeight</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'bold'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">}}</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#858585">{</span><span style="color:#b8a965">children</span><span style="color:#858585">}</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">&lt;/</span><span style="color:#429988">div</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">);</span></span>
<span class="line"><span style="color:#858585">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575">// styled-components or @emotion/styled, with string styles</span></span>
<span class="line"><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">ErrorMessage</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">styled</span><span style="color:#858585">.</span><span style="color:#a1b567">div</span><span style="color:#c98a7d">`</span></span>
<span class="line"><span style="color:#c98a7d">  color: red;</span></span>
<span class="line"><span style="color:#c98a7d">  font-weight: bold;</span></span>
<span class="line"><span style="color:#c98a7d">`</span><span style="color:#858585">;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#a0ada0">// @emotion/react (css prop), with object styles</span></span>
<span class="line"><span style="color:#ab5959">function</span><span style="color:#393a34"> </span><span style="color:#6c7834">ErrorMessage</span><span style="color:#8e8f8b">({</span><span style="color:#393a34"> </span><span style="color:#8c862b">children</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">})</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#1c6b48">return</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">div</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">css</span><span style="color:#ab5959">=</span><span style="color:#8e8f8b">{{</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">color</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'red'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">        </span><span style="color:#b58451">fontWeight</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'bold'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">}}</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8e8f8b">{</span><span style="color:#8c862b">children</span><span style="color:#8e8f8b">}</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">div</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">);</span></span>
<span class="line"><span style="color:#8e8f8b">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#a0ada0">// styled-components or @emotion/styled, with string styles</span></span>
<span class="line"><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">ErrorMessage</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#b56959">styled</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">div</span><span style="color:#b56959">`</span></span>
<span class="line"><span style="color:#b56959">  color: red;</span></span>
<span class="line"><span style="color:#b56959">  font-weight: bold;</span></span>
<span class="line"><span style="color:#b56959">`</span><span style="color:#8e8f8b">;</span></span>
<span class="line"></span></code></pre></div></code></pre><h2 id="the-good-the-bad-and-the-ugly-of-css-in-js" tabindex="-1">The Good, The Bad, and the Ugly of CSS-in-JS <a class="header-anchor" href="#the-good-the-bad-and-the-ugly-of-css-in-js" aria-hidden="true">#</a></h2><p>Before we get into the nitty-gritty of specific CSS-in-JS coding patterns and their implications for performance, let’s start with a high-level overview of why you might choose to adopt the technology, and why you might not.</p><h3 id="the-good" tabindex="-1">The Good <a class="header-anchor" href="#the-good" aria-hidden="true">#</a></h3><p><strong>1. Locally-scoped styles.</strong> When writing plain CSS, it’s very easy to accidentally apply styles more widely than you intended. For example, imagine you’re making a list view where each row should have some padding and a border. You’d likely write CSS like this:</p><pre><code><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#dbd7ca">   .row {</span></span>
<span class="line"><span style="color:#dbd7ca">     padding: 0.5rem;</span></span>
<span class="line"><span style="color:#dbd7ca">     border: 1px solid #ddd;</span></span>
<span class="line"><span style="color:#dbd7ca">   }</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#393a34">   .row {</span></span>
<span class="line"><span style="color:#393a34">     padding: 0.5rem;</span></span>
<span class="line"><span style="color:#393a34">     border: 1px solid #ddd;</span></span>
<span class="line"><span style="color:#393a34">   }</span></span>
<span class="line"><span style="color:#393a34"></span></span></code></pre></div></code></pre><p>Several months later when you’ve completely forgotten about the list view, you create another component that has rows. Naturally, you set <code>className="row"</code> on these elements. Now the new component’s rows have an unsightly border and you have no idea why! While this type of problem can be solved by using longer class names or more specific selectors, it’s still on you as the developer to ensure there are no class name conflicts.</p><p>CSS-in-JS completely solves this problem by making styles locally-scoped by default. If you were to write your list view row as</p><pre><code><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#dbd7ca">&lt;div css={{ padding: '0.5rem', border: '1px solid #ddd' }}&gt;...&lt;/div&gt;</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#393a34">&lt;div css={{ padding: '0.5rem', border: '1px solid #ddd' }}&gt;...&lt;/div&gt;</span></span>
<span class="line"><span style="color:#393a34"></span></span></code></pre></div></code></pre><p>there is no way the padding and border can accidentally get applied to unrelated elements.</p><blockquote><p>Note: CSS Modules also provide locally-scoped styles.</p></blockquote><p><strong>2. Colocation.</strong> If using plain CSS, you might put all of your <code>.css</code> files in a <code>src/styles</code> directory, while all of your React components live in <code>src/components</code>. As the size of the application grows, it quickly becomes difficult to tell which styles are used by each component. Often times, you will end up with dead code in your CSS because there’s no easy way to tell that the styles aren’t being used.</p><p>A better approach for organizing your code is to <strong>include everything related to a single component in same place.</strong> This practice, called colocation, has been covered in an <a href="https://kentcdodds.com/blog/colocation" target="_blank" rel="noopener">excellent blog post</a> by Kent C. Dodds.</p><p>The problem is that it’s hard to implement colocation when using plain CSS, since CSS and JavaScript have to go in separate files, and your styles will apply globally regardless of where the <code>.css</code> file is located. On the other hand, if you’re using CSS-in-JS, you can write your styles directly inside the React component that uses them! If done correctly, this greatly improves the maintainability of your application.</p><blockquote><p>Note: CSS Modules also allow you to colocate styles with components, though not in the same file.</p></blockquote><p><strong>3. You can use JavaScript variables in styles.</strong> CSS-in-JS enables you to reference JavaScript variables in your style rules, e.g.:</p><pre><code><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#dbd7ca">// colors.ts</span></span>
<span class="line"><span style="color:#dbd7ca">export const colors = {</span></span>
<span class="line"><span style="color:#dbd7ca">  primary: '#0d6efd',</span></span>
<span class="line"><span style="color:#dbd7ca">  border: '#ddd',</span></span>
<span class="line"><span style="color:#dbd7ca">  /* ... */</span></span>
<span class="line"><span style="color:#dbd7ca">};</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span>
<span class="line"><span style="color:#dbd7ca">// MyComponent.tsx</span></span>
<span class="line"><span style="color:#dbd7ca">function MyComponent({ fontSize }) {</span></span>
<span class="line"><span style="color:#dbd7ca">  return (</span></span>
<span class="line"><span style="color:#dbd7ca">    &lt;p</span></span>
<span class="line"><span style="color:#dbd7ca">      css={{</span></span>
<span class="line"><span style="color:#dbd7ca">        color: colors.primary,</span></span>
<span class="line"><span style="color:#dbd7ca">        fontSize,</span></span>
<span class="line"><span style="color:#dbd7ca">        border: `1px solid ${colors.border}`,</span></span>
<span class="line"><span style="color:#dbd7ca">      }}</span></span>
<span class="line"><span style="color:#dbd7ca">    &gt;</span></span>
<span class="line"><span style="color:#dbd7ca">      ...</span></span>
<span class="line"><span style="color:#dbd7ca">    &lt;/p&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  );</span></span>
<span class="line"><span style="color:#dbd7ca">}</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#393a34">// colors.ts</span></span>
<span class="line"><span style="color:#393a34">export const colors = {</span></span>
<span class="line"><span style="color:#393a34">  primary: '#0d6efd',</span></span>
<span class="line"><span style="color:#393a34">  border: '#ddd',</span></span>
<span class="line"><span style="color:#393a34">  /* ... */</span></span>
<span class="line"><span style="color:#393a34">};</span></span>
<span class="line"><span style="color:#393a34"></span></span>
<span class="line"><span style="color:#393a34">// MyComponent.tsx</span></span>
<span class="line"><span style="color:#393a34">function MyComponent({ fontSize }) {</span></span>
<span class="line"><span style="color:#393a34">  return (</span></span>
<span class="line"><span style="color:#393a34">    &lt;p</span></span>
<span class="line"><span style="color:#393a34">      css={{</span></span>
<span class="line"><span style="color:#393a34">        color: colors.primary,</span></span>
<span class="line"><span style="color:#393a34">        fontSize,</span></span>
<span class="line"><span style="color:#393a34">        border: `1px solid ${colors.border}`,</span></span>
<span class="line"><span style="color:#393a34">      }}</span></span>
<span class="line"><span style="color:#393a34">    &gt;</span></span>
<span class="line"><span style="color:#393a34">      ...</span></span>
<span class="line"><span style="color:#393a34">    &lt;/p&gt;</span></span>
<span class="line"><span style="color:#393a34">  );</span></span>
<span class="line"><span style="color:#393a34">}</span></span>
<span class="line"><span style="color:#393a34"></span></span></code></pre></div></code></pre><p>As this example shows, you can use both JavaScript constants (e.g. <code>colors</code>) and React props / state (e.g. <code>fontSize</code>) in CSS-in-JS styles. The ability to use JavaScript constants in styles reduces duplication in some cases, since the same constant does not have to be defined as both a CSS variable and a JavaScript constant. The ability to use props &amp; state allows you to create components with highly-customizable styles, without using inline styles. (Inline styles are not ideal for performance when the same styles are applied to many elements.)</p><h3 id="the-neutral" tabindex="-1">The Neutral <a class="header-anchor" href="#the-neutral" aria-hidden="true">#</a></h3><p><strong>1. It’s the hot new technology.</strong> Many web developers, myself included, are quick to adopt the hottest new trends in the JavaScript community. Part of this is rationale, since in many cases, new libraries and frameworks have proven to be massive improvements over their predecessors (just think about how much React enhances productivity over earlier libraries like jQuery). On the other hand, the other part of our obsession with shiny new tools is just that — an obsession. We’re afraid of missing out on the next big thing, and we might overlook real drawbacks when deciding to adopt a new library or framework. I think this has certainly been a factor in the widespread adoption of CSS-in-JS — at least it was for me.</p><h3 id="the-bad" tabindex="-1">The Bad <a class="header-anchor" href="#the-bad" aria-hidden="true">#</a></h3><p><strong>1. CSS-in-JS adds runtime overhead.</strong> When your components render, the CSS-in-JS library must "serialize" your styles into plain CSS that can be inserted into the document. It’s clear that this takes up extra CPU cycles, but is it enough to have a noticeable impact on the performance of your application? <strong>We’ll investigate this question in depth in the next section.</strong></p><p><strong>2. CSS-in-JS increases your bundle size.</strong> This is an obvious one — each user who visits your site now has to download the JavaScript for the CSS-in-JS library. Emotion is <a href="https://bundlephobia.com/package/@emotion/react@11.10.4" target="_blank" rel="noopener">7.9 kB</a> minzipped and styled-components is <a href="https://bundlephobia.com/package/styled-components@5.3.6" target="_blank" rel="noopener">12.7 kB</a>. So neither library is huge, but it all adds up. (<code>react</code> + <code>react-dom</code> is 44.5 kB for comparison.)</p><p><strong>3. CSS-in-JS clutters the React DevTools.</strong> For each element that uses the <code>css</code> prop, Emotion will render <code>&lt;EmotionCssPropInternal&gt;</code> and <code>&lt;Insertion&gt;</code> components. If you are using the <code>css</code> prop on many elements, Emotion’s internal components can really clutter up the React DevTools, as seen here:</p><p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--yQZly1Om--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8uh0gzxizoja69rh5ssm.png" target="_blank" rel="noopener"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--yQZly1Om--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8uh0gzxizoja69rh5ssm.png" alt="The React DevTools displaying many internal Emotion components"></a></p><h3 id="the-ugly" tabindex="-1">The Ugly <a class="header-anchor" href="#the-ugly" aria-hidden="true">#</a></h3><p><strong>1. Frequently inserting CSS rules forces the browser to do a lot of extra work.</strong> <a href="https://github.com/sebmarkbage" target="_blank" rel="noopener">Sebastian Markbåge</a>, member of the React core team and the original designer of React Hooks, wrote an <a href="https://github.com/reactwg/react-18/discussions/110" target="_blank" rel="noopener">extremely informative discussion</a> in the React 18 working group about how CSS-in-JS libraries would need to change to work with React 18, and about the future of runtime CSS-in-JS in general. In particular, he says:</p><blockquote><p>In concurrent rendering, React can yield to the browser between renders. If you insert a new rule in a component, then React yields, the browser then have to see if those rules would apply to the existing tree. So it recalculates the style rules. Then React renders the next component, and then that component discovers a new rule and it happens again.</p><p><strong>This effectively causes a recalculation of all CSS rules against all DOM nodes every frame while React is rendering.</strong> This is VERY slow.</p></blockquote><p><strong>Update 2022-10-25:</strong> This quote from Sebastian is specifically referring to performance in React Concurrent Mode, <strong>without</strong> <code>useInsertionEffect</code>. I recommend reading the full discussion if you want an in-depth understanding of this. Thanks to Dan Abramov for <a href="https://twitter.com/dan_abramov/status/1584838817982590976" target="_blank" rel="noopener">pointing out</a> this inaccuracy on Twitter.</p><p>The worst thing about this problem is that it’s not a fixable issue (within the context of runtime CSS-in-JS). Runtime CSS-in-JS libraries work by inserting new style rules when components render, and this is bad for performance on a fundamental level.</p><p><strong>2. With CSS-in-JS, there’s a lot more that can go wrong, especially when using SSR and/or component libraries.</strong> In the Emotion GitHub repository, we receive <em>tons</em> of issues that go like this:</p><blockquote><p>I’m using Emotion with server-side rendering and MUI/Mantine/(another Emotion-powered component library) and it’s not working because…</p></blockquote><p>While the root cause varies from issue to issue, there are some common themes:</p><ul><li>Multiple instances of Emotion get loaded at once. This can cause problems even if the multiple instances are all the same version of Emotion. <a href="https://github.com/emotion-js/emotion/issues/2639" target="_blank" rel="noopener">(Example issue)</a></li><li>Component libraries often do not give you full control over the order in which styles are inserted. <a href="https://github.com/emotion-js/emotion/issues/2803" target="_blank" rel="noopener">(Example issue)</a></li><li>Emotion’s SSR support works differently between React 17 and React 18. This was necessary for compatibility with React 18’s streaming SSR. <a href="https://github.com/emotion-js/emotion/issues/2725" target="_blank" rel="noopener">(Example issue)</a></li></ul><p>And believe me, these sources of complexity are just the tip of the iceberg. (If you’re feeling brave, take a look at the <a href="https://github.com/emotion-js/emotion/blob/8a163746f0de5c6a43052db37f14c36d703be7b9/packages/styled/types/base.d.ts" target="_blank" rel="noopener">TypeScript definitions for <code>@emotion/styled</code></a>.)</p><h2 id="performance-deep-dive" tabindex="-1">Performance Deep Dive <a class="header-anchor" href="#performance-deep-dive" aria-hidden="true">#</a></h2><p>At this point, it’s clear that there are both significant pros and significant cons to runtime CSS-in-JS. To understand why our team is moving away from the technology, we need to explore the real-world performance impact of CSS-in-JS.</p><p>This section focuses on the performance impact of Emotion, <strong>as it was used in the Spot codebase.</strong> As such, it would be a mistake to assume that the performance numbers presented below apply to your codebase as well — there are many ways to use Emotion, and each of these has its own performance characteristics.</p><h3 id="serialization-inside-of-render-vs-outside-of-render" tabindex="-1">Serialization Inside of Render vs. Outside of Render <a class="header-anchor" href="#serialization-inside-of-render-vs-outside-of-render" aria-hidden="true">#</a></h3><p><em>Style serialization</em> refers to the process by which Emotion takes your CSS string or object styles and converts them to a plain CSS string that can be inserted into the document. Emotion also computes a hash of the plain CSS during serialization — this hash is what you see in the generated class names, e.g. <code>css-15nl2r3</code>.</p><p>While I have not measured this, I believe one of the most significant factors in how Emotion performs is whether style serialization is performed inside or outside of the React render cycle.</p><p>The examples in the Emotion docs perform serialization inside render, like this:</p><pre><code><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#dbd7ca">function MyComponent() {</span></span>
<span class="line"><span style="color:#dbd7ca">  return (</span></span>
<span class="line"><span style="color:#dbd7ca">    &lt;div</span></span>
<span class="line"><span style="color:#dbd7ca">      css={{</span></span>
<span class="line"><span style="color:#dbd7ca">        backgroundColor: 'blue',</span></span>
<span class="line"><span style="color:#dbd7ca">        width: 100,</span></span>
<span class="line"><span style="color:#dbd7ca">        height: 100,</span></span>
<span class="line"><span style="color:#dbd7ca">      }}</span></span>
<span class="line"><span style="color:#dbd7ca">    /&gt;</span></span>
<span class="line"><span style="color:#dbd7ca">  );</span></span>
<span class="line"><span style="color:#dbd7ca">}</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#393a34">function MyComponent() {</span></span>
<span class="line"><span style="color:#393a34">  return (</span></span>
<span class="line"><span style="color:#393a34">    &lt;div</span></span>
<span class="line"><span style="color:#393a34">      css={{</span></span>
<span class="line"><span style="color:#393a34">        backgroundColor: 'blue',</span></span>
<span class="line"><span style="color:#393a34">        width: 100,</span></span>
<span class="line"><span style="color:#393a34">        height: 100,</span></span>
<span class="line"><span style="color:#393a34">      }}</span></span>
<span class="line"><span style="color:#393a34">    /&gt;</span></span>
<span class="line"><span style="color:#393a34">  );</span></span>
<span class="line"><span style="color:#393a34">}</span></span>
<span class="line"><span style="color:#393a34"></span></span></code></pre></div></code></pre><p>Every time <code>MyComponent</code> renders, the object styles are serialized again. If <code>MyComponent</code> renders frequently (e.g. on every keystroke), the repeated serialization may have a high performance cost.</p><p>A more performant approach is to move the styles outside of the component, so that serialization happens one time when the module loads, instead of on each render. You can do this with the <code>css</code> function from <code>@emotion/react</code>:</p><pre><code><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#dbd7ca">const myCss = css({</span></span>
<span class="line"><span style="color:#dbd7ca">  backgroundColor: 'blue',</span></span>
<span class="line"><span style="color:#dbd7ca">  width: 100,</span></span>
<span class="line"><span style="color:#dbd7ca">  height: 100,</span></span>
<span class="line"><span style="color:#dbd7ca">});</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span>
<span class="line"><span style="color:#dbd7ca">function MyComponent() {</span></span>
<span class="line"><span style="color:#dbd7ca">  return &lt;div css={myCss} /&gt;;</span></span>
<span class="line"><span style="color:#dbd7ca">}</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#393a34">const myCss = css({</span></span>
<span class="line"><span style="color:#393a34">  backgroundColor: 'blue',</span></span>
<span class="line"><span style="color:#393a34">  width: 100,</span></span>
<span class="line"><span style="color:#393a34">  height: 100,</span></span>
<span class="line"><span style="color:#393a34">});</span></span>
<span class="line"><span style="color:#393a34"></span></span>
<span class="line"><span style="color:#393a34">function MyComponent() {</span></span>
<span class="line"><span style="color:#393a34">  return &lt;div css={myCss} /&gt;;</span></span>
<span class="line"><span style="color:#393a34">}</span></span>
<span class="line"><span style="color:#393a34"></span></span></code></pre></div></code></pre><p>Of course, this prevents you from accessing props in your styles, so you are missing out on one of the main selling points of CSS-in-JS.</p><p><strong>At Spot, we performed style serialization in render, so the following performance analysis will focus on this case.</strong></p><h3 id="benchmarking-the-member-browser" tabindex="-1">Benchmarking the Member Browser <a class="header-anchor" href="#benchmarking-the-member-browser" aria-hidden="true">#</a></h3><p>It’s finally time to make things concrete by profiling a real component from Spot. We’ll be using the Member Browser, a fairly simple list view that shows you all of the users in your team. Virtually all of the Member Browser’s styles are using Emotion, specifically the <code>css</code> prop.</p><p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OKBdkNCP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2ds504qgf3ni0mjkujyu.png" target="_blank" rel="noopener"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OKBdkNCP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2ds504qgf3ni0mjkujyu.png" alt="The Member Browser in Spot"></a></p><p>For the test,</p><ul><li>The Member Browser will display 20 users,</li><li>The <code>React.memo</code> around the list items will be removed, and</li><li>We’ll force the top-most <code>&lt;BrowseMembers&gt;</code> component to render each second, and record the times for the first 10 renders.</li><li>React Strict Mode is off. (It effectively doubles the render times you see in the profiler.)</li></ul><p>I profiled the page using the React DevTools and got <strong>54.3 ms</strong> as the average of the first 10 render times.</p><p>My personal rule of thumb is that a React component should take 16 ms or less to render, since 1 frame at 60 frames per second is 16.67 ms. The Member Browser is currently over 3 times this figure, so it’s a pretty heavyweight component.</p><p>This test was performed on an <strong>M1 Max</strong> CPU which is WAY faster than what the average user will have. The 54.3 ms render time that I got could easily be <strong>200 ms</strong> on a less powerful machine.</p><h3 id="analyzing-the-flamegraph" tabindex="-1">Analyzing the Flamegraph <a class="header-anchor" href="#analyzing-the-flamegraph" aria-hidden="true">#</a></h3><p>Here’s the flamegraph for a <strong>single list item</strong> from the above test:</p><p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--3F7yQooV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/b8o8ubckz1qrn9753pp0.png" target="_blank" rel="noopener"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--3F7yQooV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/b8o8ubckz1qrn9753pp0.png" alt="Performance flamegraph of the BrowseMembersItem component"></a></p><p>As you can see, there are a huge number of <code>&lt;Box&gt;</code> and <code>&lt;Flex&gt;</code> components being rendered — these are our "style primitives" which use the <code>css</code> prop. While each <code>&lt;Box&gt;</code> only takes 0.1 – 0.2 ms to render, this adds up because the total number of <code>&lt;Box&gt;</code> components is massive.</p><h3 id="benchmarking-the-member-browser-without-emotion" tabindex="-1">Benchmarking the Member Browser, without Emotion <a class="header-anchor" href="#benchmarking-the-member-browser-without-emotion" aria-hidden="true">#</a></h3><p>To see how much of this expensive render was due to Emotion, I rewrote the Member Browser styles using Sass Modules instead of Emotion. (Sass Modules are compiled to plain CSS at build time, so there is virtually no performance penalty to using them.)</p><p>I repeated the same test described above and got <strong>27.7 ms</strong> as the average of the first 10 renders. That’s a <strong>48% decrease</strong> from the original time!</p><p>So, that’s the reason we are breaking up with CSS-in-JS: the runtime performance cost is simply too high.</p><p>To repeat my disclaimer from above: this result only directly applies to the Spot codebase and how we were using Emotion. If your codebase is using Emotion in a more performant way (e.g. style serialization outside of render), you will likely see a much smaller benefit after removing CSS-in-JS from the equation.</p><p>Here is the raw data for those who are curious:</p><p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ojqusqLA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/uyygzdyyhng3yzzuq95e.png" target="_blank" rel="noopener"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ojqusqLA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/uyygzdyyhng3yzzuq95e.png" alt="Spreadsheet showing render times between Emotion and non-Emotion Member Browser"></a></p><h2 id="our-new-styling-system" tabindex="-1">Our New Styling System <a class="header-anchor" href="#our-new-styling-system" aria-hidden="true">#</a></h2><p>After we made up our minds to switch away from CSS-in-JS, the obvious question is: what should we be using instead? Ideally, we want a styling system that has performance similar to that of plain CSS while keeping as many of the benefits of CSS-in-JS as possible. Here are the primary benefits of CSS-in-JS that I described in the section titled "The Good":</p><ol><li>Styles are locally-scoped.</li><li>Styles are colocated with the components they apply to.</li><li>You can use JavaScript variables in styles.</li></ol><p>If you paid close attention to that section, you’ll remember that I said that CSS Modules also provide locally-scoped styles and colocation. And CSS Modules compile to plain CSS files, so there is no runtime performance cost to using them.</p><p>The main downside to CSS Modules in my mind is that, at end of the day, they are still plain CSS — and plain CSS is lacking features that improve DX and reduce code duplication. While <a href="https://developer.chrome.com/blog/help-css-nesting/" target="_blank" rel="noopener">nested selectors</a> are coming to CSS, they aren’t here yet, and this feature is a huge quality of life boost for us.</p><p>Fortunately, there is an easy solution to this problem — Sass Modules, which are simply CSS Modules written in <a href="https://sass-lang.com/" target="_blank" rel="noopener">Sass</a>. You get the locally-scoped styles of CSS Modules AND the powerful build-time features of Sass, with essentially no runtime cost. This is why Sass Modules will be our general purpose styling solution going forward.</p><blockquote><p>Side note: With Sass Modules, you lose benefit 3 of CSS-in-JS (the ability to use JavaScript variables in styles). Though, you can use an <code>:export</code> block in your Sass file to make constants from the Sass code available to JavaScript. This isn’t as convenient, but it keeps things DRY.</p></blockquote><h3 id="utility-classes" tabindex="-1">Utility Classes <a class="header-anchor" href="#utility-classes" aria-hidden="true">#</a></h3><p>One concern the team had about switching from Emotion to Sass Modules is that it would be less convenient to apply extremely common styles, like <code>display: flex</code>. Before, we would write:</p><pre><code><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#dbd7ca">&lt;FlexH alignItems="center"&gt;...&lt;/FlexH&gt;</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#393a34">&lt;FlexH alignItems="center"&gt;...&lt;/FlexH&gt;</span></span>
<span class="line"><span style="color:#393a34"></span></span></code></pre></div></code></pre><p>To do this using only Sass Modules, we would have to open the <code>.module.scss</code> file and create a class that applies the styles <code>display: flex</code> and <code>align-items: center</code>. It’s not the end of the world, but it’s definitely less convenient.</p><p>To improve the DX around this, we decided to bring in a utility class system. If you aren’t familiar with utility classes, they are CSS classes that set a single CSS property on the element. Usually, you will combine multiple utility classes to get the desired styles. For the example above, you would write something like this:</p><pre><code><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#dbd7ca">&lt;div className="d-flex align-items-center"&gt;...&lt;/div&gt;</span></span>
<span class="line"><span style="color:#dbd7ca"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#393a34">&lt;div className="d-flex align-items-center"&gt;...&lt;/div&gt;</span></span>
<span class="line"><span style="color:#393a34"></span></span></code></pre></div></code></pre><p><a href="https://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap</a> and <a href="https://tailwindcss.com/" target="_blank" rel="noopener">Tailwind</a> are the most popular CSS frameworks that offer utility classes. These libraries have put a lot of design effort into their utility systems, so it made the most sense to adopt one of them instead of rolling our own. I had already been using Bootstrap for years, so we went with Bootstrap. While you can bring in the Bootstrap utility classes as a pre-built CSS file, we needed to customize the classes to fit our existing styling system, so I copied the relevant parts of the Bootstrap source code into our project.</p><p>We’ve been using Sass Modules and utility classes for new components for several weeks now and are quite happy with it. The DX is similar to that of Emotion, and the runtime performance is vastly superior.</p><blockquote><p>Side note: We’re also using the <a href="https://www.npmjs.com/package/typed-scss-modules" target="_blank" rel="noopener">typed-scss-modules</a> package to generate TypeScript definitions for our Sass Modules. Perhaps the largest benefit of this is that it allowed us to define a <code>utils()</code> helper function that works like <a href="https://www.npmjs.com/package/classnames" target="_blank" rel="noopener">classnames</a>, except it only accepts valid utility class names as arguments.</p></blockquote><h3 id="a-note-about-compile-time-css-in-js" tabindex="-1">A Note about Compile-Time CSS-in-JS <a class="header-anchor" href="#a-note-about-compile-time-css-in-js" aria-hidden="true">#</a></h3><p>This article focused on runtime CSS-in-JS libraries like Emotion and styled-components. Recently, we’ve seen an increasing number of CSS-in-JS libraries that convert your styles to plain CSS at compile time. These include:</p><ul><li><a href="https://compiledcssinjs.com/" target="_blank" rel="noopener">Compiled</a></li><li><a href="https://vanilla-extract.style/" target="_blank" rel="noopener">Vanilla Extract</a></li><li><a href="https://linaria.dev/" target="_blank" rel="noopener">Linaria</a></li></ul><p>These libraries purport to provide a similar benefits to runtime CSS-in-JS, without the performance cost.</p><p>While I have not used any compile-time CSS-in-JS libraries myself, I still think they have drawbacks when compared with Sass Modules. Here are the drawbacks I saw when looking at Compiled in particular:</p><ul><li>Styles are still inserted when a component mounts for the first time, which forces the browser to recalculate the styles on every DOM node. (This drawback was discussed in the section title "The Ugly".)</li><li>Dynamic styles like the <code>color</code> prop in <a href="https://compiledcssinjs.com/#speed-up-your-styles" target="_blank" rel="noopener">this example</a> cannot be extracted at build time, so Compiled adds the value as a CSS variable using the <code>style</code> prop (a.k.a. inline styles). Inline styles are known to cause suboptimal performance when applied many elements.</li><li>The library still inserts boilerplate components into your React tree as shown <a href="https://compiledcssinjs.com/#speed-up-your-styles" target="_blank" rel="noopener">here</a>. This will clutter up the React DevTools just like runtime CSS-in-JS.</li></ul><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-hidden="true">#</a></h2><p>Thanks for reading this deep dive into runtime CSS-in-JS. Like any technology, it has its pros and cons. Ultimately, it’s up to you as a developer to evaluate these pros and cons and then make an informed decision about whether the technology is right for your use case. For us at Spot, the runtime performance cost of Emotion far outweighed the DX benefits, especially when you consider that the alternative of Sass Modules + utility classes still has a good DX while providing vastly superior performance.</p><h2 id="this-article-is-reprinted-from" tabindex="-1">This article is reprinted from <a class="header-anchor" href="#this-article-is-reprinted-from" aria-hidden="true">#</a></h2><p><strong><a href="https://link.zhihu.com/?target=https%3A//dev.to/srmagura/why-were-breaking-up-wiht-css-in-js-4g9b" target="_blank" rel="noopener">Why We’re Breaking Up with CSS-in-JS</a></strong></p><p>Some good Chinese articles： <strong><a href="https://zhuanlan.zhihu.com/p/583155810" target="_blank" rel="noopener">精读《我们为何弃用 css-in-js》</a></strong></p></div><!--]--></article><div class="prose m-auto mt-8 mb-8"><br><a href="/posts" class="font-mono no-underline opacity-50 hover:opacity-75">exit ..</a></div><!--]--><div class="mt-10 mb-6 prose m-auto opacity-50 flex"><span class="text-sm"><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color:inherit">CC BY-NC-SA 4.0</a> 2021-PRESENT © Bohua Xu</span><div class="flex-auto"></div></div></main><!--]--></div><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5CKG5K6F" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --><link rel="stylesheet" href="/assets/index.7a5f51af.css"></body><!-- Google Tag Manager (noscript) --></html>